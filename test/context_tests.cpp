#include "testutils.h"
#include "gmock/gmock.h"
#include "gtest/gtest.h"
#include <filesystem>
#include <iostream>
#include <string>

extern "C"
{
#include "test_interface.h"
#include "to_string.h"
}

class ContextTest : public testing::Test
{
  public:
    char *root_string = nullptr;
    char *symbols_string = nullptr;
    node_st *root = nullptr;
    std::string input_filepath;
    std::string err_output;
    std::string std_output;

  protected:
    ContextTest()
    {
    }

    void SetUpNoExecute(std::string filepath)
    {
        input_filepath =
            std::filesystem::absolute(std::string(PROJECT_DIRECTORY) + "/test/data/" + filepath);
        ASSERT_TRUE(std::filesystem::exists(input_filepath))
            << "File does not exist at path '" << input_filepath << "'";
    }

    void SetUp(std::string filepath)
    {
        SetUpNoExecute(filepath);
        testing::internal::CaptureStdout();
        testing::internal::CaptureStderr();
        root = run_context_analysis(input_filepath.c_str());
        EXPECT_NE(nullptr, root) << "Could not parse ast in file: '" << input_filepath << "'";
        err_output = testing::internal::GetCapturedStderr();
        std_output = testing::internal::GetCapturedStdout();
        ASSERT_THAT(err_output,
                    testing::Not(testing::HasSubstr("error: Inconsistent node found in AST")));
        root_string = node_to_string(root);
        symbols_string = symbols_to_string(root);
    }

    void TearDown() override
    {
        if (root_string != nullptr)
        {

            if (HasFailure())
            {
                std::cerr
                    << "========================================================================\n"
                    << "                        Node Representation\n"
                    << "========================================================================\n"
                    << root_string << std::endl;
            }

            free(root_string);
        }

        if (symbols_string != nullptr)
        {
            if (HasFailure())
            {
                std::cerr
                    << "========================================================================\n"
                    << "                        Symbol Tables of AST\n"
                    << "========================================================================\n"
                    << symbols_string << std::endl;
            }

            free(symbols_string);
        }

        if (root != nullptr)
        {
            cleanup_nodes(root);
            root = nullptr;
        }
    }
};

TEST_F(ContextTest, Typecheck_Valid)
{
    SetUp("typecheck/valid/main.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_ops'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'>'\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Int -- val:'5'\n"
                           "┃        ┃        │  └─ Int -- val:'3'\n"
                           "┃        ┃        └─ Int -- val:'7'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Int -- val:'5'\n"
                           "┃        ┃        └─ Monop -- op:'-'\n"
                           "┃        ┃           └─ Int -- val:'5'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Float -- val:'5.000000'\n"
                           "┃        ┃        │  └─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'7.000000'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'=='\n"
                           "┃        ┃        ├─ Binop -- op:'-'\n"
                           "┃        ┃        │  ├─ Float -- val:'5.000000'\n"
                           "┃        ┃        │  └─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'7.000000'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Int -- val:'5'\n"
                           "┃        ┃        │  └─ Int -- val:'3'\n"
                           "┃        ┃        └─ Int -- val:'7'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'=='\n"
                           "┃        ┃        ├─ Binop -- op:'-'\n"
                           "┃        ┃        │  ├─ Int -- val:'5'\n"
                           "┃        ┃        │  └─ Int -- val:'3'\n"
                           "┃        ┃        └─ Int -- val:'7'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Bool -- val:'1'\n"
                           "┃        ┃        └─ Var -- name:'b'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'=='\n"
                           "┃        ┃        ├─ Bool -- val:'1'\n"
                           "┃        ┃        └─ Var -- name:'b'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'<'\n"
                           "┃        ┃        ├─ Binop -- op:'*'\n"
                           "┃        ┃        │  ├─ Float -- val:'5.000000'\n"
                           "┃        ┃        │  └─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Binop -- op:'/'\n"
                           "┃        ┃           ├─ Monop -- op:'-'\n"
                           "┃        ┃           │  └─ Float -- val:'7.000000'\n"
                           "┃        ┃           └─ Float -- val:'3.000000'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'<='\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Int -- val:'5'\n"
                           "┃        ┃        │  └─ Int -- val:'3'\n"
                           "┃        ┃        └─ Binop -- op:'/'\n"
                           "┃        ┃           ├─ Int -- val:'7'\n"
                           "┃        ┃           └─ Int -- val:'2'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'>='\n"
                           "┃        ┃        ├─ Binop -- op:'*'\n"
                           "┃        ┃        │  ├─ Int -- val:'5'\n"
                           "┃        ┃        │  └─ Int -- val:'3'\n"
                           "┃        ┃        └─ Binop -- op:'*'\n"
                           "┃        ┃           ├─ Int -- val:'7'\n"
                           "┃        ┃           └─ Int -- val:'2'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Monop -- op:'!'\n"
                           "┃        ┃        └─ Var -- name:'b'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Monop -- op:'!'\n"
                           "┃        ┃        └─ Monop -- op:'!'\n"
                           "┃        ┃           └─ Monop -- op:'!'\n"
                           "┃        ┃              └─ Monop -- op:'!'\n"
                           "┃        ┃                 └─ Binop -- op:'>'\n"
                           "┃        ┃                    ├─ Int -- val:'5'\n"
                           "┃        ┃                    └─ Int -- val:'7'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'b'\n"
                           "┃        ┃        └─ Binop -- op:'*'\n"
                           "┃        ┃           ├─ Var -- name:'b'\n"
                           "┃        ┃           └─ Var -- name:'b'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Binop -- op:'%'\n"
                           "┃        ┃        │  ├─ Var -- name:'a'\n"
                           "┃        ┃        │  └─ Var -- name:'a'\n"
                           "┃        ┃        └─ Monop -- op:'-'\n"
                           "┃        ┃           └─ Int -- val:'5'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'&&'\n"
                           "┃        ┃        ├─ Binop -- op:'&&'\n"
                           "┃        ┃        │  ├─ Var -- name:'b'\n"
                           "┃        ┃        │  └─ Var -- name:'b'\n"
                           "┃        ┃        └─ Bool -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'||'\n"
                           "┃        ┃        ├─ Binop -- op:'||'\n"
                           "┃        ┃        │  ├─ Var -- name:'b'\n"
                           "┃        ┃        │  └─ Var -- name:'b'\n"
                           "┃        ┃        └─ Bool -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_retint'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'float'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_retfloat'\n"
                           "┃        ┃     │  └─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┢─ LocalFunDefs\n"
                           "┃        ┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃        ┃     ├─ FunHeader -- type:'bool'\n"
                           "┃        ┃        ┃     │  ├─ Var -- name:'@fun_retbool'\n"
                           "┃        ┃        ┃     │  └─ NULL\n"
                           "┃        ┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┃        ┢─ Statements\n"
                           "┃        ┃        ┃        ┃  └─ RetStatement\n"
                           "┃        ┃        ┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┃        ┃        ┗─ NULL\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ┢─ Statements\n"
                           "┃        ┃        ┃  └─ IfStatement\n"
                           "┃        ┃        ┃     ├─ Bool -- val:'1'\n"
                           "┃        ┃        ┃     ┢─ Statements\n"
                           "┃        ┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃        ┃     ┃     └─ Float -- val:'6.000000'\n"
                           "┃        ┃        ┃     ┡─ NULL\n"
                           "┃        ┃        ┃     ┢─ Statements\n"
                           "┃        ┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃        ┃     ┃     └─ Float -- val:'4.000000'\n"
                           "┃        ┃        ┃     ┗─ NULL\n"
                           "┃        ┃        ┗─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Bool -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     └─ Int -- val:'1'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'5'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_cast'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Cast -- type:'int'\n"
                           "┃        ┃        └─ Cast -- type:'bool'\n"
                           "┃        ┃           └─ Cast -- type:'float'\n"
                           "┃        ┃              └─ Cast -- type:'int'\n"
                           "┃        ┃                 └─ Bool -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Cast -- type:'bool'\n"
                           "┃        ┃        └─ Binop -- op:'+'\n"
                           "┃        ┃           ├─ Binop -- op:'+'\n"
                           "┃        ┃           │  ├─ Binop -- op:'+'\n"
                           "┃        ┃           │  │  ├─ Int -- val:'5'\n"
                           "┃        ┃           │  │  └─ Int -- val:'5'\n"
                           "┃        ┃           │  └─ Int -- val:'7'\n"
                           "┃        ┃           └─ Int -- val:'8'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'f'\n"
                           "┃        ┃     └─ Cast -- type:'float'\n"
                           "┃        ┃        └─ Binop -- op:'&&'\n"
                           "┃        ┃           ├─ Binop -- op:'<'\n"
                           "┃        ┃           │  ├─ Var -- name:'a'\n"
                           "┃        ┃           │  └─ Int -- val:'5'\n"
                           "┃        ┃           └─ Binop -- op:'>'\n"
                           "┃        ┃              ├─ Int -- val:'10'\n"
                           "┃        ┃              └─ Var -- name:'a'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_array'\n"
                           "┃     │  ┢─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
                           "┃     │  ┃     ┣─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'param'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'3'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input1'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'1.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'2.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'3.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'4.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'5.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'6.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input2'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'1.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'2.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'3.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'4.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'5.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'6.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'7.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'8.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'9.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'10.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'6'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input3'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  └─ Int -- val:'3'\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  └─ Int -- val:'4'\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  └─ Int -- val:'6'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input4'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  ┃  ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  ┃  ┃  ┃  └─ Bool -- val:'1'\n"
                           "┃        ┃     ┃  ┃  ┃  ┃  ┗─ NULL\n"
                           "┃        ┃     ┃  ┃  ┃  ┗─ NULL\n"
                           "┃        ┃     ┃  ┃  ┗─ NULL\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'3'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input5'\n"
                           "┃        ┃     └─ Float -- val:'1.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'6'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input6'\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input7'\n"
                           "┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ArrayAssign\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'param'\n"
                           "┃        ┃     └─ Float -- val:'1.000000'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_retint: FunHeader -- type:'int' -- Params: (null)\n"
               "├─ @fun_cast: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_ops: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_array: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_ops' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'bool'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_retint' -- parent: '0: Program'\n"
               "├─ @fun_retfloat: FunHeader -- type:'float' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_retfloat' -- parent: '1: FunDef '@fun_retint''\n"
               "├─ @fun_retbool: FunHeader -- type:'bool' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 3: FunDef '@fun_retbool' -- parent: '2: FunDef '@fun_retfloat''\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_cast' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'bool'\n"
               "├─ f: VarDec -- type:'float'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_array' -- parent: '0: Program'\n"
               "├─ m: DimensionVars\n"
               "├─ n: DimensionVars\n"
               "├─ param: Params -- type:'float'\n"
               "├─ input1: VarDec -- type:'float'\n"
               "├─ input2: VarDec -- type:'float'\n"
               "├─ input3: VarDec -- type:'int'\n"
               "├─ input4: VarDec -- type:'bool'\n"
               "├─ input5: VarDec -- type:'float'\n"
               "├─ input6: VarDec -- type:'int'\n"
               "├─ input7: VarDec -- type:'bool'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, NestedFor)
{
    SetUp("nested_for/main.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for1_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for2_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for3_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Int -- val:'5'\n"
                           "┃        ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ForLoop\n"
                           "┃        ┃     ┃     ├─ Assign\n"
                           "┃        ┃     ┃     │  ├─ Var -- name:'@for1_i'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ├─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     ┃     └─ Var -- name:'@for1_i'\n"
                           "┃        ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ ForLoop\n"
                           "┃        ┃     ┃     ┃     ├─ Assign\n"
                           "┃        ┃     ┃     ┃     │  ├─ Var -- name:'@for2_i'\n"
                           "┃        ┃     ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┃     ├─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     ┃     ┃     └─ Var -- name:'@for2_i'\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ForLoop\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Assign\n"
                           "┃        ┃     ┃     ┃     ┃     │  ├─ Var -- name:'@for3_i'\n"
                           "┃        ┃     ┃     ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     └─ Var -- name:'@for3_i'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     ┃     ┃     └─ Var -- name:'@for2_i'\n"
                           "┃        ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     ┃     └─ Var -- name:'@for1_i'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_test: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_test' -- parent: '0: Program'\n"
               "├─ @for1_i: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'int'\n"
               "├─ @for2_i: VarDec -- type:'int'\n"
               "├─ @for3_i: VarDec -- type:'int'\n"
               "├─ @for0_i: VarDec -- type:'int'\n"
               "└────────────────────\n";
    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, BadMain)
{
    SetUp("bad_main/main.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_main'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'a'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Int -- val:'5'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_main: FunHeader -- type:'void' -- Params: int (Var -- name:'a')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_main' -- parent: '0: Program'\n"
               "├─ a: Params -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);

    ASSERT_THAT(
        err_output,
        testing::HasSubstr("warning: Defined main functions is missing the 'export' attribute."));
    ASSERT_THAT(
        err_output,
        testing::HasSubstr(
            "warning: Defined main function should be of type 'int' to return an exit code."));
    ASSERT_THAT(err_output,
                testing::HasSubstr(
                    "warning: Defined main function should not contain any function parameters."));
}

TEST_F(ContextTest, SameIdentifierFunDefVarDecValid)
{
    SetUp("same_identifier/fundef_vardec/main.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_fun_one'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'param0'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_param0'\n"
                           "┃        ┃     │  └─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┢─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'param0'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'float'\n"
                           "┃     │  ├─ Var -- name:'@fun_fun_two'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'param1'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_nested'\n"
                           "┃        ┃     │  ┢─ Params -- type:'int'\n"
                           "┃        ┃     │  ┃  └─ Var -- name:'val1'\n"
                           "┃        ┃     │  ┗─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┢─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┃        ┣─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃        ┃     ├─ Var -- name:'nested'\n"
                           "┃        ┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Float -- val:'1.000000'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'bool'\n"
                           "┃     │  ├─ Var -- name:'@fun_fun_three'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'param2'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'shadow'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'int'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_shadow'\n"
                           "┃        ┃     │  ┢─ Params -- type:'int'\n"
                           "┃        ┃     │  ┃  └─ Var -- name:'val1'\n"
                           "┃        ┃     │  ┗─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┢─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┢─ Statements\n"
                           "┃        ┃        ┃  └─ RetStatement\n"
                           "┃        ┃        ┃     └─ Var -- name:'a'\n"
                           "┃        ┃        ┗─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_fun_three: FunHeader -- type:'bool' -- Params: int (Var -- name:'param2')\n"
               "├─ @fun_fun_one: FunHeader -- type:'int' -- Params: int (Var -- name:'param0')\n"
               "├─ @fun_fun_two: FunHeader -- type:'float' -- Params: int (Var -- name:'param1')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_fun_one' -- parent: '0: Program'\n"
               "├─ param0: Params -- type:'int'\n"
               "├─ @fun_param0: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_param0' -- parent: '1: FunDef '@fun_fun_one''\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_fun_two' -- parent: '0: Program'\n"
               "├─ param1: Params -- type:'int'\n"
               "├─ @fun_nested: FunHeader -- type:'void' -- Params: int (Var -- name:'val1')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_nested' -- parent: '1: FunDef '@fun_fun_two''\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ val1: Params -- type:'int'\n"
               "├─ nested: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_fun_three' -- parent: '0: Program'\n"
               "├─ param2: Params -- type:'int'\n"
               "├─ shadow: VarDec -- type:'int'\n"
               "├─ @fun_shadow: FunHeader -- type:'int' -- Params: int (Var -- name:'val1')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_shadow' -- parent: '1: FunDef '@fun_fun_three''\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ val1: Params -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, SameIdentifierParamNestedParam)
{
    SetUp("same_identifier/param_nested_param/main.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_fun_one'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'param0'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_nested_fun_one'\n"
                           "┃        ┃     │  ┢─ Params -- type:'int'\n"
                           "┃        ┃     │  ┃  └─ Var -- name:'param0'\n"
                           "┃        ┃     │  ┗─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'param0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected =
        "┌─ 0: Program\n"
        "├─ @fun_fun_one: FunHeader -- type:'int' -- Params: int (Var -- name:'param0')\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_fun_one' -- parent: '0: Program'\n"
        "├─ param0: Params -- type:'int'\n"
        "├─ @fun_nested_fun_one: FunHeader -- type:'void' -- Params: int (Var -- name:'param0')\n"
        "└────────────────────\n"
        "\n"
        "┌─ 2: FunDef '@fun_nested_fun_one' -- parent: '1: FunDef '@fun_fun_one''\n"
        "├─ param0: Params -- type:'int'\n"
        "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, ProcCallContext)
{
    SetUp("proc_call/context/main.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_fun'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'i'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'i'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ ProcCall\n"
                           "┃        ┃        │  ├─ Var -- name:'@fun_fun'\n"
                           "┃        ┃        │  ┢─ Exprs\n"
                           "┃        ┃        │  ┃  └─ Int -- val:'1'\n"
                           "┃        ┃        │  ┗─ NULL\n"
                           "┃        ┃        └─ ProcCall\n"
                           "┃        ┃           ├─ Var -- name:'@fun_fun'\n"
                           "┃        ┃           ┢─ Exprs\n"
                           "┃        ┃           ┃  └─ Int -- val:'2'\n"
                           "┃        ┃           ┗─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";
    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_test: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_fun: FunHeader -- type:'int' -- Params: int (Var -- name:'i')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_fun' -- parent: '0: Program'\n"
               "├─ i: Params -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_test' -- parent: '0: Program'\n"
               "├─ b: VarDec -- type:'int'\n"
               "└────────────────────\n";
    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_Binop)
{
    SetUp("testsuite_public/basic/check_success/binops.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'c'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Int -- val:'3'\n"
                           "┃        ┃        └─ Int -- val:'4'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'d'\n"
                           "┃        ┃     └─ Binop -- op:'*'\n"
                           "┃        ┃        ├─ Int -- val:'5'\n"
                           "┃        ┃        └─ Int -- val:'6'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'e'\n"
                           "┃        ┃     └─ Binop -- op:'%'\n"
                           "┃        ┃        ├─ Int -- val:'7'\n"
                           "┃        ┃        └─ Int -- val:'8'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'f'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Var -- name:'c'\n"
                           "┃        ┃        │  └─ Var -- name:'d'\n"
                           "┃        ┃        └─ Binop -- op:'*'\n"
                           "┃        ┃           ├─ Var -- name:'e'\n"
                           "┃        ┃           └─ Var -- name:'b'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";
    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'int'\n"
               "├─ c: VarDec -- type:'int'\n"
               "├─ d: VarDec -- type:'int'\n"
               "├─ e: VarDec -- type:'int'\n"
               "├─ f: VarDec -- type:'int'\n"
               "└────────────────────\n";
    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_Boolop)
{
    SetUp("testsuite_public/basic/check_success/boolop.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_f'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  │  ├─ Int -- val:'2'\n"
                           "┃        ┃        │  │  └─ Int -- val:'3'\n"
                           "┃        ┃        │  └─ Int -- val:'4'\n"
                           "┃        ┃        └─ Int -- val:'5'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Float -- val:'39.000000'\n"
                           "┃        ┃        │  └─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'21.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'c'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Bool -- val:'0'\n"
                           "┃        ┃        └─ Bool -- val:'0'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'d'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Binop -- op:'-'\n"
                           "┃        ┃        │  ├─ Binop -- op:'-'\n"
                           "┃        ┃        │  │  ├─ Int -- val:'2'\n"
                           "┃        ┃        │  │  └─ Int -- val:'3'\n"
                           "┃        ┃        │  └─ Int -- val:'4'\n"
                           "┃        ┃        └─ Int -- val:'5'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'e'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Binop -- op:'-'\n"
                           "┃        ┃        │  ├─ Float -- val:'39.000000'\n"
                           "┃        ┃        │  └─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'21.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'f'\n"
                           "┃        ┃     └─ Binop -- op:'*'\n"
                           "┃        ┃        ├─ Binop -- op:'*'\n"
                           "┃        ┃        │  ├─ Int -- val:'2'\n"
                           "┃        ┃        │  └─ Int -- val:'3'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'g'\n"
                           "┃        ┃     └─ Binop -- op:'*'\n"
                           "┃        ┃        ├─ Float -- val:'3.140000'\n"
                           "┃        ┃        └─ Float -- val:'2.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'h'\n"
                           "┃        ┃     └─ Binop -- op:'*'\n"
                           "┃        ┃        ├─ Bool -- val:'1'\n"
                           "┃        ┃        └─ Bool -- val:'0'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'i'\n"
                           "┃        ┃     └─ Binop -- op:'/'\n"
                           "┃        ┃        ├─ Int -- val:'4'\n"
                           "┃        ┃        └─ Int -- val:'3'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'j'\n"
                           "┃        ┃     └─ Binop -- op:'/'\n"
                           "┃        ┃        ├─ Int -- val:'6'\n"
                           "┃        ┃        └─ Int -- val:'0'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'k'\n"
                           "┃        ┃     └─ Binop -- op:'/'\n"
                           "┃        ┃        ├─ Float -- val:'5.000000'\n"
                           "┃        ┃        └─ Float -- val:'2.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'l'\n"
                           "┃        ┃     └─ Binop -- op:'/'\n"
                           "┃        ┃        ├─ Float -- val:'9.000000'\n"
                           "┃        ┃        └─ Float -- val:'0.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'m'\n"
                           "┃        ┃     └─ Binop -- op:'%'\n"
                           "┃        ┃        ├─ Binop -- op:'%'\n"
                           "┃        ┃        │  ├─ Int -- val:'12'\n"
                           "┃        ┃        │  └─ Int -- val:'8'\n"
                           "┃        ┃        └─ Int -- val:'3'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'n'\n"
                           "┃        ┃     └─ Binop -- op:'<'\n"
                           "┃        ┃        ├─ Int -- val:'20'\n"
                           "┃        ┃        └─ Int -- val:'20'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'o'\n"
                           "┃        ┃     └─ Binop -- op:'<'\n"
                           "┃        ┃        ├─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'6.100000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'p'\n"
                           "┃        ┃     └─ Binop -- op:'<='\n"
                           "┃        ┃        ├─ Int -- val:'20'\n"
                           "┃        ┃        └─ Int -- val:'20'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'q'\n"
                           "┃        ┃     └─ Binop -- op:'<='\n"
                           "┃        ┃        ├─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'6.100000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'r'\n"
                           "┃        ┃     └─ Binop -- op:'||'\n"
                           "┃        ┃        ├─ Binop -- op:'<'\n"
                           "┃        ┃        │  ├─ Int -- val:'60'\n"
                           "┃        ┃        │  └─ Int -- val:'50'\n"
                           "┃        ┃        └─ Binop -- op:'>'\n"
                           "┃        ┃           ├─ Int -- val:'30'\n"
                           "┃        ┃           └─ Int -- val:'10'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'s'\n"
                           "┃        ┃     └─ Binop -- op:'>'\n"
                           "┃        ┃        ├─ Float -- val:'3.000000'\n"
                           "┃        ┃        └─ Float -- val:'2.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'t'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Int -- val:'8'\n"
                           "┃        ┃        └─ Int -- val:'8'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'u'\n"
                           "┃        ┃     └─ Binop -- op:'=='\n"
                           "┃        ┃        ├─ Int -- val:'8'\n"
                           "┃        ┃        └─ Int -- val:'8'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'v'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Float -- val:'1.200000'\n"
                           "┃        ┃        └─ Float -- val:'2.100000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'w'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Bool -- val:'1'\n"
                           "┃        ┃        └─ Bool -- val:'0'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_f: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_f' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'float'\n"
               "├─ c: VarDec -- type:'bool'\n"
               "├─ d: VarDec -- type:'int'\n"
               "├─ e: VarDec -- type:'float'\n"
               "├─ f: VarDec -- type:'int'\n"
               "├─ g: VarDec -- type:'float'\n"
               "├─ h: VarDec -- type:'bool'\n"
               "├─ i: VarDec -- type:'int'\n"
               "├─ j: VarDec -- type:'int'\n"
               "├─ k: VarDec -- type:'float'\n"
               "├─ l: VarDec -- type:'float'\n"
               "├─ m: VarDec -- type:'int'\n"
               "├─ n: VarDec -- type:'bool'\n"
               "├─ o: VarDec -- type:'bool'\n"
               "├─ p: VarDec -- type:'bool'\n"
               "├─ q: VarDec -- type:'bool'\n"
               "├─ r: VarDec -- type:'bool'\n"
               "├─ s: VarDec -- type:'bool'\n"
               "├─ t: VarDec -- type:'bool'\n"
               "├─ u: VarDec -- type:'bool'\n"
               "├─ v: VarDec -- type:'bool'\n"
               "├─ w: VarDec -- type:'bool'\n"
               "└────────────────────\n";
    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_CommentMultiline)
{
    SetUp("testsuite_public/basic/check_success/comment_multiline.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'a'\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_CommentSingleline)
{
    SetUp("testsuite_public/basic/check_success/comment_singleline.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'a'\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_DoWhile)
{
    SetUp("testsuite_public/basic/check_success/do_while.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test_do_while2'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'x'\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'y'\n"
                           "┃        ┃     └─ Int -- val:'10'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ DoWhileLoop\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'x'\n"
                           "┃        ┃     ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃     ┃        ├─ Var -- name:'x'\n"
                           "┃        ┃     ┃        └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'y'\n"
                           "┃        ┃     ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃     ┃        ├─ Var -- name:'y'\n"
                           "┃        ┃     ┃        └─ Int -- val:'1'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Binop -- op:'<='\n"
                           "┃        ┃        ├─ Var -- name:'x'\n"
                           "┃        ┃        └─ Var -- name:'y'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_test_do_while2: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_test_do_while2' -- parent: '0: Program'\n"
               "├─ x: VarDec -- type:'int'\n"
               "├─ y: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_EarlyReturn)
{
    SetUp("testsuite_public/basic/check_success/early_return.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'p'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'i'\n"
                           "┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Binop -- op:'>'\n"
                           "┃        ┃     │  ├─ Var -- name:'p'\n"
                           "┃        ┃     │  └─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'i'\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: int (Var -- name:'p')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ i: VarDec -- type:'int'\n"
               "├─ p: Params -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ExternVar)
{
    SetUp("testsuite_public/basic/check_success/extern_var.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDec -- type:'float'\n"
                           "┃     └─ Var -- name:'pi'\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ pi: GlobalDec -- type:'float'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_NoReturn)
{
    SetUp("testsuite_public/basic/check_success/no_return.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_baz'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_baz: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_baz' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParamsFuncall)
{
    SetUp("testsuite_public/basic/check_success/params_funcall.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ ProcCall\n"
                           "┃        ┃        │  ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃        │  └─ NULL\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'int' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParamsSimple)
{
    SetUp("testsuite_public/basic/check_success/params_simple.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_func'\n"
                           "┃     │  ┢─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ Var -- name:'b'\n"
                           "┃     │  ┣─ Params -- type:'bool'\n"
                           "┃     │  ┃  └─ Var -- name:'c'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_func: FunHeader -- type:'void' -- Params: float (Var -- name:'b'), bool "
               "(Var -- name:'c')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_func' -- parent: '0: Program'\n"
               "├─ b: Params -- type:'float'\n"
               "├─ c: Params -- type:'bool'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseAssign)
{
    SetUp("testsuite_public/basic/check_success/parse_assign.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'b'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ b: VarDec -- type:'int'\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseDoWhile)
{
    SetUp("testsuite_public/basic/check_success/parse_do_while.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ DoWhileLoop\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ DoWhileLoop\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Bool -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseFor)
{
    SetUp("testsuite_public/basic/check_success/parse_for.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for1_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for2_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Int -- val:'10'\n"
                           "┃        ┃     ├─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for1_i'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Int -- val:'10'\n"
                           "┃        ┃     ├─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for2_i'\n"
                           "┃        ┃     │  └─ Int -- val:'10'\n"
                           "┃        ┃     ├─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Monop -- op:'-'\n"
                           "┃        ┃     │  └─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ @for1_i: VarDec -- type:'int'\n"
               "├─ @for2_i: VarDec -- type:'int'\n"
               "├─ @for0_i: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseFunbody)
{
    SetUp("testsuite_public/basic/check_success/parse_funbody.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_vardec'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_vardec_stat'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_vardec_ret'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_vardec_stat_ret'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'a'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_stat_ret'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_vardec'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_ret'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'2'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_vardec: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_vardec_stat_ret: FunHeader -- type:'int' -- Params: (null)\n"
               "├─ @fun_ret: FunHeader -- type:'int' -- Params: (null)\n"
               "├─ @fun_stat_ret: FunHeader -- type:'int' -- Params: (null)\n"
               "├─ @fun_vardec_stat: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_vardec_ret: FunHeader -- type:'int' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_vardec' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_vardec_stat' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_vardec_ret' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_vardec_stat_ret' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_stat_ret' -- parent: '0: Program'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_ret' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseFuncall)
{
    SetUp("testsuite_public/basic/check_success/parse_funcall.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseGlobaldec)
{
    SetUp("testsuite_public/basic/check_success/parse_globaldec.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDec -- type:'bool'\n"
                           "┃     └─ Var -- name:'a'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDec -- type:'int'\n"
                           "┃     └─ Var -- name:'b'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDec -- type:'float'\n"
                           "┃     └─ Var -- name:'c'\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ a: GlobalDec -- type:'bool'\n"
               "├─ b: GlobalDec -- type:'int'\n"
               "├─ c: GlobalDec -- type:'float'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseGlobaldef)
{
    SetUp("testsuite_public/basic/check_success/parse_globaldef.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'a'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'float'\n"
                           "┃        ├─ Var -- name:'b'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'bool'\n"
                           "┃        ├─ Var -- name:'c'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'d'\n"
                           "┃        └─ Int -- val:'321'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'float'\n"
                           "┃        ├─ Var -- name:'e'\n"
                           "┃        └─ Float -- val:'1.000000'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'bool'\n"
                           "┃        ├─ Var -- name:'f'\n"
                           "┃        └─ Bool -- val:'0'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'1'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'a2'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'1'\n"
                           "┃     └─ VarDec -- type:'float'\n"
                           "┃        ├─ Var -- name:'b2'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'1'\n"
                           "┃     └─ VarDec -- type:'bool'\n"
                           "┃        ├─ Var -- name:'c2'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'1'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'d2'\n"
                           "┃        └─ Int -- val:'321'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'1'\n"
                           "┃     └─ VarDec -- type:'float'\n"
                           "┃        ├─ Var -- name:'e2'\n"
                           "┃        └─ Float -- val:'1.000000'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'1'\n"
                           "┃     └─ VarDec -- type:'bool'\n"
                           "┃        ├─ Var -- name:'f2'\n"
                           "┃        └─ Bool -- val:'0'\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'float'\n"
               "├─ c: VarDec -- type:'bool'\n"
               "├─ d: VarDec -- type:'int'\n"
               "├─ e: VarDec -- type:'float'\n"
               "├─ f: VarDec -- type:'bool'\n"
               "├─ a2: VarDec -- type:'int'\n"
               "├─ b2: VarDec -- type:'float'\n"
               "├─ c2: VarDec -- type:'bool'\n"
               "├─ d2: VarDec -- type:'int'\n"
               "├─ e2: VarDec -- type:'float'\n"
               "├─ f2: VarDec -- type:'bool'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseIfElse)
{
    SetUp("testsuite_public/basic/check_success/parse_if_else.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Bool -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Bool -- val:'0'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Bool -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_IntegerOutOfRange)
{
    SetUp("testsuite_public/basic/check_error/integer_out_of_range.cvc");
    ASSERT_NE(nullptr, root);
    ASSERT_THAT(err_output, testing::HasSubstr("warning: Int out of range."));

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'i'\n"
                           "┃        └─ Int -- val:'2147483647'\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'i'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_main'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'i'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ i: VarDec -- type:'int'\n"
               "├─ @fun_printInt: FunHeader -- type:'void' -- Params: int (Var -- name:'i')\n"
               "├─ @fun_main: FunHeader -- type:'int' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_main' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseOperators)
{
    SetUp("testsuite_public/basic/check_success/parse_operators.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Int -- val:'1'\n"
                           "┃        ┃        └─ Int -- val:'2'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'*'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'45'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'/'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'9'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'%'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'4'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'<'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'>'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'2'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'<='\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'3'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'>='\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'4'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'=='\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'5'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'!='\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'6'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'&&'\n"
                           "┃        ┃        ├─ Binop -- op:'!='\n"
                           "┃        ┃        │  ├─ Var -- name:'a'\n"
                           "┃        ┃        │  └─ Int -- val:'6'\n"
                           "┃        ┃        └─ Binop -- op:'>='\n"
                           "┃        ┃           ├─ Var -- name:'a'\n"
                           "┃        ┃           └─ Int -- val:'4'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'||'\n"
                           "┃        ┃        ├─ Binop -- op:'=='\n"
                           "┃        ┃        │  ├─ Var -- name:'a'\n"
                           "┃        ┃        │  └─ Int -- val:'6'\n"
                           "┃        ┃        └─ Binop -- op:'<='\n"
                           "┃        ┃           ├─ Var -- name:'a'\n"
                           "┃        ┃           └─ Int -- val:'4'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Monop -- op:'-'\n"
                           "┃        ┃        └─ Var -- name:'a'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Monop -- op:'!'\n"
                           "┃        ┃        └─ Var -- name:'b'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Monop -- op:'-'\n"
                           "┃        ┃           └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Monop -- op:'-'\n"
                           "┃        ┃        └─ Monop -- op:'-'\n"
                           "┃        ┃           └─ Monop -- op:'-'\n"
                           "┃        ┃              └─ Monop -- op:'-'\n"
                           "┃        ┃                 └─ Monop -- op:'-'\n"
                           "┃        ┃                    └─ Monop -- op:'-'\n"
                           "┃        ┃                       └─ Var -- name:'a'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'bool'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseTypecast)
{
    SetUp("testsuite_public/basic/check_success/parse_typecast.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'i'\n"
                           "┃        ┃     └─ Cast -- type:'int'\n"
                           "┃        ┃        └─ Float -- val:'1.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'f'\n"
                           "┃        ┃     └─ Cast -- type:'float'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Cast -- type:'bool'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ b: VarDec -- type:'bool'\n"
               "├─ f: VarDec -- type:'float'\n"
               "├─ i: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_ParseVardec)
{
    SetUp("testsuite_public/basic/check_success/parse_vardec.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'f'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'b2'\n"
                           "┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'i2'\n"
                           "┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ Var -- name:'f2'\n"
                           "┃        ┃     └─ Float -- val:'1.000000'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ i2: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'bool'\n"
               "├─ f: VarDec -- type:'float'\n"
               "├─ i: VarDec -- type:'int'\n"
               "├─ b2: VarDec -- type:'bool'\n"
               "├─ f2: VarDec -- type:'float'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Basic_VardecInit)
{
    SetUp("testsuite_public/basic/check_success/vardec_init.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_testVarInits'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Int -- val:'3'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'c'\n"
                           "┃        ┃     └─ Int -- val:'5'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'d'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Var -- name:'c'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'2'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_testVarInits: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_testVarInits' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'int'\n"
               "├─ c: VarDec -- type:'int'\n"
               "├─ d: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Arrays_ExternArrayArg)
{
    SetUp("testsuite_public/arrays/check_success/extern_array_arg.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ GlobalDec -- type:'int'\n"
                           "┃     └─ ArrayVar\n"
                           "┃        ┢─ DimensionVars\n"
                           "┃        ┃  └─ Var -- name:'n'\n"
                           "┃        ┡─ NULL\n"
                           "┃        └─ Var -- name:'arr'\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'a'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_main'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'arr'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ n: DimensionVars\n"
               "├─ arr: GlobalDec -- type:'int'\n"
               "├─ @fun_foo: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
               "├─ @fun_main: FunHeader -- type:'int' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
               "├─ a: Params -- type:'int'\n"
               "├─ m: DimensionVars\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_main' -- parent: '0: Program'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Arrays_LocalArraydef)
{
    SetUp("testsuite_public/arrays/check_success/local_arraydef.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_func'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'10'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'20'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'30'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'j'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'4'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'6'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'k'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_func: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_func' -- parent: '0: Program'\n"
               "├─ i: VarDec -- type:'int'\n"
               "├─ j: VarDec -- type:'int'\n"
               "├─ k: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Arrays_ScanVectorMatrix)
{
    SetUp("testsuite_public/arrays/check_success/scan_vector_matrix.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'int'\n"
                           "┃        ├─ Var -- name:'@fun_scanInt'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'float'\n"
                           "┃        ├─ Var -- name:'@fun_scanFloat'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'c'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printFloat'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ Var -- name:'c'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_scan_vector'\n"
                           "┃     │  ┢─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'a'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Var -- name:'m'\n"
                           "┃        ┃     ├─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ArrayAssign\n"
                           "┃        ┃     ┃     ├─ ArrayExpr\n"
                           "┃        ┃     ┃     │  ┢─ Exprs\n"
                           "┃        ┃     ┃     │  ┃  └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┃     │  ┡─ NULL\n"
                           "┃        ┃     ┃     │  └─ Var -- name:'a'\n"
                           "┃        ┃     ┃     └─ ProcCall\n"
                           "┃        ┃     ┃        ├─ Var -- name:'@fun_scanFloat'\n"
                           "┃        ┃     ┃        └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_scan_matrix'\n"
                           "┃     │  ┢─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
                           "┃     │  ┃     ┣─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'a'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for1_j'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Var -- name:'m'\n"
                           "┃        ┃     ├─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ForLoop\n"
                           "┃        ┃     ┃     ├─ Assign\n"
                           "┃        ┃     ┃     │  ├─ Var -- name:'@for1_j'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     ├─ NULL\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ ArrayAssign\n"
                           "┃        ┃     ┃     ┃     ├─ ArrayExpr\n"
                           "┃        ┃     ┃     ┃     │  ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┃     ┃     │  ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for1_j'\n"
                           "┃        ┃     ┃     ┃     │  ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     │  └─ Var -- name:'a'\n"
                           "┃        ┃     ┃     ┃     └─ ProcCall\n"
                           "┃        ┃     ┃     ┃        ├─ Var -- name:'@fun_scanFloat'\n"
                           "┃        ┃     ┃     ┃        └─ NULL\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_main'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'m'\n"
                           "┃        ┃     └─ Int -- val:'3'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'n'\n"
                           "┃        ┃     └─ Int -- val:'3'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_do_vector'\n"
                           "┃        ┃     │  └─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┢─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃        ┃     │  ┃  └─ Var -- name:'m'\n"
                           "┃        ┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃        ┃     │  └─ Var -- name:'v'\n"
                           "┃        ┃        ┃     └─ NULL\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┢─ Statements\n"
                           "┃        ┃        ┃  └─ ProcCall\n"
                           "┃        ┃        ┃     ├─ Var -- name:'@fun_scan_vector'\n"
                           "┃        ┃        ┃     ┢─ Exprs\n"
                           "┃        ┃        ┃     ┃  └─ Var -- name:'v'\n"
                           "┃        ┃        ┃     ┗─ NULL\n"
                           "┃        ┃        ┗─ NULL\n"
                           "┃        ┣─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_do_matrix'\n"
                           "┃        ┃     │  └─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┢─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃        ┃     │  ┃  └─ Var -- name:'m'\n"
                           "┃        ┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃        ┃     │  ┃  └─ Var -- name:'n'\n"
                           "┃        ┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃        ┃     │  └─ Var -- name:'M'\n"
                           "┃        ┃        ┃     └─ NULL\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┢─ Statements\n"
                           "┃        ┃        ┃  └─ ProcCall\n"
                           "┃        ┃        ┃     ├─ Var -- name:'@fun_scan_matrix'\n"
                           "┃        ┃        ┃     ┢─ Exprs\n"
                           "┃        ┃        ┃     ┃  └─ Var -- name:'M'\n"
                           "┃        ┃        ┃     ┗─ NULL\n"
                           "┃        ┃        ┗─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Binop -- op:'&&'\n"
                           "┃        ┃     │  ├─ Binop -- op:'=='\n"
                           "┃        ┃     │  │  ├─ Var -- name:'n'\n"
                           "┃        ┃     │  │  └─ Int -- val:'1'\n"
                           "┃        ┃     │  └─ Binop -- op:'>='\n"
                           "┃        ┃     │     ├─ Var -- name:'m'\n"
                           "┃        ┃     │     └─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_do_vector'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ├─ Binop -- op:'&&'\n"
                           "┃        ┃     ┃     │  ├─ Binop -- op:'>'\n"
                           "┃        ┃     ┃     │  │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  │  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     │  └─ Binop -- op:'>='\n"
                           "┃        ┃     ┃     │     ├─ Var -- name:'m'\n"
                           "┃        ┃     ┃     │     └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ├─ Var -- name:'@fun_do_matrix'\n"
                           "┃        ┃     ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_scanFloat: FunHeader -- type:'float' -- Params: (null)\n"
               "├─ @fun_scan_matrix: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
               "├─ @fun_printInt: FunHeader -- type:'void' -- Params: int (Var -- name:'c')\n"
               "├─ @fun_scanInt: FunHeader -- type:'int' -- Params: (null)\n"
               "├─ @fun_scan_vector: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
               "├─ @fun_main: FunHeader -- type:'int' -- Params: (null)\n"
               "├─ @fun_printFloat: FunHeader -- type:'void' -- Params: float (Var -- name:'c')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_scan_vector' -- parent: '0: Program'\n"
               "├─ a: Params -- type:'float'\n"
               "├─ m: DimensionVars\n"
               "├─ @for0_i: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_scan_matrix' -- parent: '0: Program'\n"
               "├─ a: Params -- type:'float'\n"
               "├─ @for1_j: VarDec -- type:'int'\n"
               "├─ m: DimensionVars\n"
               "├─ n: DimensionVars\n"
               "├─ @for0_i: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_main' -- parent: '0: Program'\n"
               "├─ m: VarDec -- type:'int'\n"
               "├─ n: VarDec -- type:'int'\n"
               "├─ @fun_do_vector: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_do_matrix: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_do_vector' -- parent: '1: FunDef '@fun_main''\n"
               "├─ v: VarDec -- type:'float'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_do_matrix' -- parent: '1: FunDef '@fun_main''\n"
               "├─ M: VarDec -- type:'float'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_Arrays_Scopes)
{
    SetUp("testsuite_public/arrays/check_success/scopes.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'val'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'num'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'a'\n"
                           "┃        └─ Int -- val:'1'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'b'\n"
                           "┃        └─ Int -- val:'2'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ ArrayExpr\n"
                           "┃        │  ┢─ Exprs\n"
                           "┃        │  ┃  └─ Int -- val:'4'\n"
                           "┃        │  ┡─ NULL\n"
                           "┃        │  └─ Var -- name:'c'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDec -- type:'int'\n"
                           "┃     └─ ArrayVar\n"
                           "┃        ┢─ DimensionVars\n"
                           "┃        ┃  └─ Var -- name:'m'\n"
                           "┃        ┡─ NULL\n"
                           "┃        └─ Var -- name:'d'\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_foo'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Binop -- op:'+'\n"
                           "┃        ┃        │  ├─ Var -- name:'a'\n"
                           "┃        ┃        │  └─ Var -- name:'b'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'m'\n"
                           "┃        ┃     └─ Var -- name:'m'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'int'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_baz'\n"
                           "┃        ┃     │  ┢─ Params -- type:'int'\n"
                           "┃        ┃     │  ┃  └─ Var -- name:'c'\n"
                           "┃        ┃     │  ┣─ Params -- type:'int'\n"
                           "┃        ┃     │  ┃  └─ ArrayVar\n"
                           "┃        ┃     │  ┃     ┢─ DimensionVars\n"
                           "┃        ┃     │  ┃     ┃  └─ Var -- name:'b'\n"
                           "┃        ┃     │  ┃     ┡─ NULL\n"
                           "┃        ┃     │  ┃     └─ Var -- name:'d'\n"
                           "┃        ┃     │  ┗─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ┢─ VarDecs\n"
                           "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ┃        ├─ Var -- name:'c'\n"
                           "┃        ┃        ┃        └─ Var -- name:'b'\n"
                           "┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ┢─ Statements\n"
                           "┃        ┃        ┃  └─ RetStatement\n"
                           "┃        ┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        ┃        └─ ArrayExpr\n"
                           "┃        ┃        ┃           ┢─ Exprs\n"
                           "┃        ┃        ┃           ┃  └─ Var -- name:'c'\n"
                           "┃        ┃        ┃           ┡─ NULL\n"
                           "┃        ┃        ┃           └─ Var -- name:'d'\n"
                           "┃        ┃        ┗─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ ProcCall\n"
                           "┃        ┃        ├─ Var -- name:'@fun_baz'\n"
                           "┃        ┃        ┢─ Exprs\n"
                           "┃        ┃        ┃  └─ Binop -- op:'+'\n"
                           "┃        ┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃        ┃     └─ ArrayExpr\n"
                           "┃        ┃        ┃        ┢─ Exprs\n"
                           "┃        ┃        ┃        ┃  └─ Binop -- op:'-'\n"
                           "┃        ┃        ┃        ┃     ├─ Var -- name:'m'\n"
                           "┃        ┃        ┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┃        ┃        ┡─ NULL\n"
                           "┃        ┃        ┃        └─ Var -- name:'d'\n"
                           "┃        ┃        ┣─ Exprs\n"
                           "┃        ┃        ┃  └─ Var -- name:'c'\n"
                           "┃        ┃        ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_bar'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Var -- name:'b'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'a'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_baz'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for1_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'i'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Int -- val:'1'\n"
                           "┃        ┃     ├─ Int -- val:'10'\n"
                           "┃        ┃     ├─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ForLoop\n"
                           "┃        ┃     ┃     ├─ Assign\n"
                           "┃        ┃     ┃     │  ├─ Var -- name:'@for1_i'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ├─ Int -- val:'10'\n"
                           "┃        ┃     ┃     ├─ NULL\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃  └─ Var -- name:'@for1_i'\n"
                           "┃        ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'i'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_main'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_foo'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_bar'\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_baz'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected =
        "┌─ 0: Program\n"
        "├─ @fun_bar: FunHeader -- type:'int' -- Params: (null)\n"
        "├─ a: VarDec -- type:'int'\n"
        "├─ b: VarDec -- type:'int'\n"
        "├─ c: VarDec -- type:'int'\n"
        "├─ d: GlobalDec -- type:'int'\n"
        "├─ @fun_baz: FunHeader -- type:'void' -- Params: (null)\n"
        "├─ m: DimensionVars\n"
        "├─ @fun_foo: FunHeader -- type:'int' -- Params: (null)\n"
        "├─ @fun_printInt: FunHeader -- type:'void' -- Params: int (Var -- name:'val')\n"
        "├─ @fun_printNewlines: FunHeader -- type:'void' -- Params: int (Var -- name:'num')\n"
        "├─ @fun_main: FunHeader -- type:'int' -- Params: (null)\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_foo' -- parent: '0: Program'\n"
        "├─ a: VarDec -- type:'int'\n"
        "├─ @fun_baz: FunHeader -- type:'int' -- Params: int (Var -- name:'c'), int (ArrayVar)\n"
        "├─ m: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 2: FunDef '@fun_baz' -- parent: '1: FunDef '@fun_foo''\n"
        "├─ a: VarDec -- type:'int'\n"
        "├─ b: DimensionVars\n"
        "├─ c: Params -- type:'int'\n"
        "├─ d: Params -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_bar' -- parent: '0: Program'\n"
        "├─ a: VarDec -- type:'int'\n"
        "├─ b: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_baz' -- parent: '0: Program'\n"
        "├─ @for1_i: VarDec -- type:'int'\n"
        "├─ i: VarDec -- type:'int'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_main' -- parent: '0: Program'\n"
        "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Suite_NestedFuns_LocalFun)
{
    SetUp("testsuite_public/nested_funs/check_success/local_funs.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_func'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Monop -- op:'-'\n"
                           "┃        ┃        │  └─ Int -- val:'2'\n"
                           "┃        ┃        └─ Int -- val:'10'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     └─ Binop -- op:'-'\n"
                           "┃        ┃        ├─ Int -- val:'2'\n"
                           "┃        ┃        └─ Int -- val:'10'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ┢─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_f'\n"
                           "┃        ┃     │  └─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        └─ NULL\n"
                           "┃        ┣─ LocalFunDefs\n"
                           "┃        ┃  └─ FunDef -- has_export:'0'\n"
                           "┃        ┃     ├─ FunHeader -- type:'void'\n"
                           "┃        ┃     │  ├─ Var -- name:'@fun_g'\n"
                           "┃        ┃     │  └─ NULL\n"
                           "┃        ┃     └─ FunBody\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        ├─ NULL\n"
                           "┃        ┃        └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        └─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_func: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_func' -- parent: '0: Program'\n"
               "├─ a: VarDec -- type:'int'\n"
               "├─ b: VarDec -- type:'int'\n"
               "├─ @fun_f: FunHeader -- type:'void' -- Params: (null)\n"
               "├─ @fun_g: FunHeader -- type:'void' -- Params: (null)\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_f' -- parent: '1: FunDef '@fun_func''\n"
               "└────────────────────\n"
               "\n"
               "┌─ 2: FunDef '@fun_g' -- parent: '1: FunDef '@fun_func''\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Functional_Assignment01_Array)
{
    SetUp("functional/assignment_01/array.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected =
        "Program\n"
        "┢─ Declarations\n"
        "┃  └─ FunDec\n"
        "┃     └─ FunHeader -- type:'void'\n"
        "┃        ├─ Var -- name:'@fun_printInt'\n"
        "┃        ┢─ Params -- type:'int'\n"
        "┃        ┃  └─ Var -- name:'val'\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDec\n"
        "┃     └─ FunHeader -- type:'void'\n"
        "┃        ├─ Var -- name:'@fun_printFloat'\n"
        "┃        ┢─ Params -- type:'float'\n"
        "┃        ┃  └─ Var -- name:'val'\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDec\n"
        "┃     └─ FunHeader -- type:'int'\n"
        "┃        ├─ Var -- name:'@fun_scanInt'\n"
        "┃        └─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDec\n"
        "┃     └─ FunHeader -- type:'float'\n"
        "┃        ├─ Var -- name:'@fun_scanFloat'\n"
        "┃        └─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDec\n"
        "┃     └─ FunHeader -- type:'void'\n"
        "┃        ├─ Var -- name:'@fun_printSpaces'\n"
        "┃        ┢─ Params -- type:'int'\n"
        "┃        ┃  └─ Var -- name:'num'\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDec\n"
        "┃     └─ FunHeader -- type:'void'\n"
        "┃        ├─ Var -- name:'@fun_printNewlines'\n"
        "┃        ┢─ Params -- type:'int'\n"
        "┃        ┃  └─ Var -- name:'num'\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_printIntVec'\n"
        "┃     │  ┢─ Params -- type:'int'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'vec'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃     ┃     ┃     └─ Var -- name:'vec'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_printFloatVec'\n"
        "┃     │  ┢─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'vec'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printFloat'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃     ┃     ┃     └─ Var -- name:'vec'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_printIntMat'\n"
        "┃     │  ┢─ Params -- type:'int'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'mat'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
        "┃        ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃  └─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     ┃     ┃     ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃     ┃     ┃     ┃     └─ Var -- name:'mat'\n"
        "┃        ┃     ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┃     ┣─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
        "┃        ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printNewlines'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_printFloatMat'\n"
        "┃     │  ┢─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'mat'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ┃     ├─ Var -- name:'@fun_printFloat'\n"
        "┃        ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃  └─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     ┃     ┃     ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃     ┃     ┃     ┃     └─ Var -- name:'mat'\n"
        "┃        ┃     ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printNewlines'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_scanIntVec'\n"
        "┃     │  ┢─ Params -- type:'int'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'vec'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     │  ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     │  └─ Var -- name:'vec'\n"
        "┃        ┃     ┃     └─ ProcCall\n"
        "┃        ┃     ┃        ├─ Var -- name:'@fun_scanInt'\n"
        "┃        ┃     ┃        └─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_scanFloatVec'\n"
        "┃     │  ┢─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'vec'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     │  ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     │  └─ Var -- name:'vec'\n"
        "┃        ┃     ┃     └─ ProcCall\n"
        "┃        ┃     ┃        ├─ Var -- name:'@fun_scanFloat'\n"
        "┃        ┃     ┃        └─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_scanIntMat'\n"
        "┃     │  ┢─ Params -- type:'int'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'mat'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     ┃     │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     │  └─ Var -- name:'mat'\n"
        "┃        ┃     ┃     ┃     └─ ProcCall\n"
        "┃        ┃     ┃     ┃        ├─ Var -- name:'@fun_scanInt'\n"
        "┃        ┃     ┃     ┃        └─ NULL\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printNewlines'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'void'\n"
        "┃     │  ├─ Var -- name:'@fun_scanFloatMat'\n"
        "┃     │  ┢─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'mat'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃     ┃     ┃     │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for1_j'\n"
        "┃        ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     │  └─ Var -- name:'mat'\n"
        "┃        ┃     ┃     ┃     └─ ProcCall\n"
        "┃        ┃     ┃     ┃        ├─ Var -- name:'@fun_scanFloat'\n"
        "┃        ┃     ┃     ┃        └─ NULL\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ ProcCall\n"
        "┃        ┃     ┃     ├─ Var -- name:'@fun_printNewlines'\n"
        "┃        ┃     ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'bool'\n"
        "┃     │  ├─ Var -- name:'@fun_matMul'\n"
        "┃     │  ┢─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'a'\n"
        "┃     │  ┣─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'o'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'p'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'b'\n"
        "┃     │  ┣─ Params -- type:'float'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'q'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'l'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'c'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_im'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for1_ik'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for2_im'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for3_in'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for4_ik'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ├─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ IfStatement\n"
        "┃        ┃     ├─ Binop -- op:'||'\n"
        "┃        ┃     │  ├─ Binop -- op:'||'\n"
        "┃        ┃     │  │  ├─ Binop -- op:'!='\n"
        "┃        ┃     │  │  │  ├─ Var -- name:'n'\n"
        "┃        ┃     │  │  │  └─ Var -- name:'o'\n"
        "┃        ┃     │  │  └─ Binop -- op:'!='\n"
        "┃        ┃     │  │     ├─ Var -- name:'m'\n"
        "┃        ┃     │  │     └─ Var -- name:'q'\n"
        "┃        ┃     │  └─ Binop -- op:'!='\n"
        "┃        ┃     │     ├─ Var -- name:'p'\n"
        "┃        ┃     │     └─ Var -- name:'l'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ RetStatement\n"
        "┃        ┃     ┃     └─ Bool -- val:'0'\n"
        "┃        ┃     ┡─ NULL\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for0_im'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for1_ik'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'p'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃     ┃     ┃     │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for1_ik'\n"
        "┃        ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     │  └─ Var -- name:'c'\n"
        "┃        ┃     ┃     ┃     └─ Float -- val:'0.000000'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┣─ Statements\n"
        "┃        ┃  └─ ForLoop\n"
        "┃        ┃     ├─ Assign\n"
        "┃        ┃     │  ├─ Var -- name:'@for2_im'\n"
        "┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for3_in'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     ┃     │  ├─ Var -- name:'@for4_ik'\n"
        "┃        ┃     ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ┃     ├─ Var -- name:'p'\n"
        "┃        ┃     ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for2_im'\n"
        "┃        ┃     ┃     ┃     ┃     │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for4_ik'\n"
        "┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'c'\n"
        "┃        ┃     ┃     ┃     ┃     └─ Binop -- op:'+'\n"
        "┃        ┃     ┃     ┃     ┃        ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┃        │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃        │  ┃  └─ Var -- name:'@for2_im'\n"
        "┃        ┃     ┃     ┃     ┃        │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃        │  ┃  └─ Var -- name:'@for4_ik'\n"
        "┃        ┃     ┃     ┃     ┃        │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     ┃        │  └─ Var -- name:'c'\n"
        "┃        ┃     ┃     ┃     ┃        └─ Binop -- op:'*'\n"
        "┃        ┃     ┃     ┃     ┃           ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┃           │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃           │  ┃  └─ Var -- name:'@for2_im'\n"
        "┃        ┃     ┃     ┃     ┃           │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃           │  ┃  └─ Var -- name:'@for3_in'\n"
        "┃        ┃     ┃     ┃     ┃           │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     ┃           │  └─ Var -- name:'a'\n"
        "┃        ┃     ┃     ┃     ┃           └─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     ┃              ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃              ┃  └─ Var -- name:'@for3_in'\n"
        "┃        ┃     ┃     ┃     ┃              ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     ┃              ┃  └─ Var -- name:'@for4_ik'\n"
        "┃        ┃     ┃     ┃     ┃              ┡─ NULL\n"
        "┃        ┃     ┃     ┃     ┃              └─ Var -- name:'b'\n"
        "┃        ┃     ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┗─ NULL\n"
        "┃        ┣─ Statements\n"
        "┃        ┃  └─ RetStatement\n"
        "┃        ┃     └─ Bool -- val:'1'\n"
        "┃        ┗─ NULL\n"
        "┣─ Declarations\n"
        "┃  └─ FunDef -- has_export:'1'\n"
        "┃     ├─ FunHeader -- type:'bool'\n"
        "┃     │  ├─ Var -- name:'@fun_queens'\n"
        "┃     │  ┢─ Params -- type:'bool'\n"
        "┃     │  ┃  └─ ArrayVar\n"
        "┃     │  ┃     ┢─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃     │  ┃     ┣─ DimensionVars\n"
        "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
        "┃     │  ┃     ┡─ NULL\n"
        "┃     │  ┃     └─ Var -- name:'field'\n"
        "┃     │  ┗─ NULL\n"
        "┃     └─ FunBody\n"
        "┃        ┢─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ ArrayExpr\n"
        "┃        ┃     │  ┢─ Exprs\n"
        "┃        ┃     │  ┃  └─ Var -- name:'m'\n"
        "┃        ┃     │  ┡─ NULL\n"
        "┃        ┃     │  └─ Var -- name:'rows'\n"
        "┃        ┃     └─ Monop -- op:'-'\n"
        "┃        ┃        └─ Int -- val:'1'\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ ArrayExpr\n"
        "┃        ┃     │  ┢─ Exprs\n"
        "┃        ┃     │  ┃  └─ Var -- name:'m'\n"
        "┃        ┃     │  ┡─ NULL\n"
        "┃        ┃     │  └─ Var -- name:'diagnolPositive'\n"
        "┃        ┃     └─ Binop -- op:'+'\n"
        "┃        ┃        ├─ Binop -- op:'+'\n"
        "┃        ┃        │  ├─ Var -- name:'m'\n"
        "┃        ┃        │  └─ Var -- name:'n'\n"
        "┃        ┃        └─ Int -- val:'1'\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ ArrayExpr\n"
        "┃        ┃     │  ┢─ Exprs\n"
        "┃        ┃     │  ┃  └─ Var -- name:'m'\n"
        "┃        ┃     │  ┡─ NULL\n"
        "┃        ┃     │  └─ Var -- name:'diagnolNegative'\n"
        "┃        ┃     └─ Binop -- op:'-'\n"
        "┃        ┃        ├─ Monop -- op:'-'\n"
        "┃        ┃        │  └─ Var -- name:'m'\n"
        "┃        ┃        └─ Var -- name:'n'\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'startIndex'\n"
        "┃        ┃     └─ Int -- val:'0'\n"
        "┃        ┣─ VarDecs\n"
        "┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃     ├─ Var -- name:'@for0_im'\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ┢─ LocalFunDefs\n"
        "┃        ┃  └─ FunDef -- has_export:'0'\n"
        "┃        ┃     ├─ FunHeader -- type:'bool'\n"
        "┃        ┃     │  ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃     │  ┢─ Params -- type:'int'\n"
        "┃        ┃     │  ┃  └─ ArrayVar\n"
        "┃        ┃     │  ┃     ┢─ DimensionVars\n"
        "┃        ┃     │  ┃     ┃  └─ Var -- name:'m'\n"
        "┃        ┃     │  ┃     ┡─ NULL\n"
        "┃        ┃     │  ┃     └─ Var -- name:'array'\n"
        "┃        ┃     │  ┣─ Params -- type:'int'\n"
        "┃        ┃     │  ┃  └─ Var -- name:'value'\n"
        "┃        ┃     │  ┗─ NULL\n"
        "┃        ┃     └─ FunBody\n"
        "┃        ┃        ┢─ VarDecs\n"
        "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃        ┃     ├─ Var -- name:'@for0_i'\n"
        "┃        ┃        ┃     └─ NULL\n"
        "┃        ┃        ┡─ NULL\n"
        "┃        ┃        ├─ NULL\n"
        "┃        ┃        ┢─ Statements\n"
        "┃        ┃        ┃  └─ ForLoop\n"
        "┃        ┃        ┃     ├─ Assign\n"
        "┃        ┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
        "┃        ┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ┃     ├─ Binop -- op:'=='\n"
        "┃        ┃        ┃     ┃     │  ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     │  │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     │  │  ┃  └─ Var -- name:'@for0_i'\n"
        "┃        ┃        ┃     ┃     │  │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     │  │  └─ Var -- name:'array'\n"
        "┃        ┃        ┃     ┃     │  └─ Var -- name:'value'\n"
        "┃        ┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃  └─ RetStatement\n"
        "┃        ┃        ┃     ┃     ┃     └─ Bool -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┡─ NULL\n"
        "┃        ┃        ┃     ┃     └─ NULL\n"
        "┃        ┃        ┃     ┗─ NULL\n"
        "┃        ┃        ┣─ Statements\n"
        "┃        ┃        ┃  └─ RetStatement\n"
        "┃        ┃        ┃     └─ Bool -- val:'0'\n"
        "┃        ┃        ┗─ NULL\n"
        "┃        ┣─ LocalFunDefs\n"
        "┃        ┃  └─ FunDef -- has_export:'0'\n"
        "┃        ┃     ├─ FunHeader -- type:'bool'\n"
        "┃        ┃     │  ├─ Var -- name:'@fun_isValid'\n"
        "┃        ┃     │  └─ NULL\n"
        "┃        ┃     └─ FunBody\n"
        "┃        ┃        ┢─ VarDecs\n"
        "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃        ┃     ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     └─ NULL\n"
        "┃        ┃        ┣─ VarDecs\n"
        "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃        ┃     ├─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     └─ NULL\n"
        "┃        ┃        ┡─ NULL\n"
        "┃        ┃        ├─ NULL\n"
        "┃        ┃        ┢─ Statements\n"
        "┃        ┃        ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ├─ Binop -- op:'!='\n"
        "┃        ┃        ┃     │  ├─ Var -- name:'m'\n"
        "┃        ┃        ┃     │  └─ Var -- name:'n'\n"
        "┃        ┃        ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃  └─ RetStatement\n"
        "┃        ┃        ┃     ┃     └─ Bool -- val:'0'\n"
        "┃        ┃        ┃     ┡─ NULL\n"
        "┃        ┃        ┃     └─ NULL\n"
        "┃        ┃        ┣─ Statements\n"
        "┃        ┃        ┃  └─ ForLoop\n"
        "┃        ┃        ┃     ├─ Assign\n"
        "┃        ┃        ┃     │  ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃        ┃     ├─ Var -- name:'m'\n"
        "┃        ┃        ┃     ├─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃        ┃     ┃     │  ├─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     │  ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     │  └─ Var -- name:'field'\n"
        "┃        ┃        ┃     ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ Binop -- op:'||'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ├─ Binop -- op:'||'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  ├─ Binop -- op:'||'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  ├─ Binop -- op:'!='\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │  ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │  │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │  │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │  │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │  │  └─ Var -- name:'rows'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │  └─ Monop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  │     └─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │  └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │     ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │     ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │     ┃  └─ Var -- name:'rows'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │     ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │     ┃  └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  │     ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │  └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┃  └─ Var -- name:'diagnolPositive'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┃  └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┃     ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┃     └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  │     ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃  └─ Var -- name:'diagnolNegative'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃  └─ Binop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃     ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃     └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃  └─ RetStatement\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     └─ Bool -- val:'0'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'rows'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'diagnolPositive'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'diagnolNegative'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Binop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        └─ Var -- name:'@for1_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ Assign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'startIndex'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        ├─ Var -- name:'@for0_im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        └─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     └─ NULL\n"
        "┃        ┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃        ┃     ┗─ NULL\n"
        "┃        ┃        ┣─ Statements\n"
        "┃        ┃        ┃  └─ RetStatement\n"
        "┃        ┃        ┃     └─ Bool -- val:'1'\n"
        "┃        ┃        ┗─ NULL\n"
        "┃        ┣─ LocalFunDefs\n"
        "┃        ┃  └─ FunDef -- has_export:'0'\n"
        "┃        ┃     ├─ FunHeader -- type:'bool'\n"
        "┃        ┃     │  ├─ Var -- name:'@fun_solveQueens'\n"
        "┃        ┃     │  ┢─ Params -- type:'int'\n"
        "┃        ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃     │  ┗─ NULL\n"
        "┃        ┃     └─ FunBody\n"
        "┃        ┃        ┢─ VarDecs\n"
        "┃        ┃        ┃  └─ VarDec -- type:'int'\n"
        "┃        ┃        ┃     ├─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     └─ NULL\n"
        "┃        ┃        ┡─ NULL\n"
        "┃        ┃        ├─ NULL\n"
        "┃        ┃        ┢─ Statements\n"
        "┃        ┃        ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ├─ Binop -- op:'<'\n"
        "┃        ┃        ┃     │  ├─ Var -- name:'im'\n"
        "┃        ┃        ┃     │  └─ Var -- name:'m'\n"
        "┃        ┃        ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃        ┃     ┃     │  ├─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃        ┃     ┃     ├─ Var -- name:'n'\n"
        "┃        ┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ┃     ┃     ├─ Binop -- op:'&&'\n"
        "┃        ┃        ┃     ┃     ┃     │  ├─ Binop -- op:'&&'\n"
        "┃        ┃        ┃     ┃     ┃     │  │  ├─ Monop -- op:'!'\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │  └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │     ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │     ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │     ┃  └─ Var -- name:'rows'\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │     ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │     ┃  └─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     ┃     │  │  │     ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     │  │  └─ Monop -- op:'!'\n"
        "┃        ┃        ┃     ┃     ┃     │  │     └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┃  └─ Var -- name:'diagnolPositive'\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┃  └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┃     ├─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┃     └─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     ┃     │  │        ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     │  └─ Monop -- op:'!'\n"
        "┃        ┃        ┃     ┃     ┃     │     └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     │        ├─ Var -- name:'@fun_contains'\n"
        "┃        ┃        ┃     ┃     ┃     │        ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │        ┃  └─ Var -- name:'diagnolNegative'\n"
        "┃        ┃        ┃     ┃     ┃     │        ┣─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     │        ┃  └─ Binop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     │        ┃     ├─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     │        ┃     └─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     ┃     │        ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'rows'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'diagnolPositive'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        ├─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        └─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ Var -- name:'diagnolNegative'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     └─ Binop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        ├─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃        └─ Var -- name:'@for0_in'\n"
        "┃        ┃        ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃  └─ IfStatement\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ├─ Monop -- op:'!'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │  └─ ProcCall\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ├─ Var -- name:'@fun_solveQueens'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃  └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃     ├─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┃     └─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     │     ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  └─ Var -- name:'rows'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     └─ Monop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        └─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  └─ Var -- name:'diagnolPositive'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     └─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        ├─ Binop -- op:'+'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        │  ├─ Var -- name:'m'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        │  └─ Var -- name:'n'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        └─ Int -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┃  └─ Var -- name:'im'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     │  └─ Var -- name:'diagnolNegative'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     └─ Binop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        ├─ Monop -- op:'-'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        │  └─ Var -- name:'m'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃        └─ Var -- name:'n'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┢─ Statements\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃  └─ RetStatement\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┃     └─ Bool -- val:'1'\n"
        "┃        ┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     ┡─ NULL\n"
        "┃        ┃        ┃     ┃     ┃     └─ NULL\n"
        "┃        ┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃        ┃     ┣─ Statements\n"
        "┃        ┃        ┃     ┃  └─ RetStatement\n"
        "┃        ┃        ┃     ┃     └─ Bool -- val:'0'\n"
        "┃        ┃        ┃     ┡─ NULL\n"
        "┃        ┃        ┃     └─ NULL\n"
        "┃        ┃        ┣─ Statements\n"
        "┃        ┃        ┃  └─ RetStatement\n"
        "┃        ┃        ┃     └─ Bool -- val:'1'\n"
        "┃        ┃        ┗─ NULL\n"
        "┃        ┡─ NULL\n"
        "┃        ┢─ Statements\n"
        "┃        ┃  └─ IfStatement\n"
        "┃        ┃     ├─ Monop -- op:'!'\n"
        "┃        ┃     │  └─ ProcCall\n"
        "┃        ┃     │     ├─ Var -- name:'@fun_isValid'\n"
        "┃        ┃     │     └─ NULL\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ RetStatement\n"
        "┃        ┃     ┃     └─ Bool -- val:'0'\n"
        "┃        ┃     ┡─ NULL\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ Statements\n"
        "┃        ┃  └─ IfStatement\n"
        "┃        ┃     ├─ ProcCall\n"
        "┃        ┃     │  ├─ Var -- name:'@fun_solveQueens'\n"
        "┃        ┃     │  ┢─ Exprs\n"
        "┃        ┃     │  ┃  └─ Var -- name:'startIndex'\n"
        "┃        ┃     │  ┗─ NULL\n"
        "┃        ┃     ┢─ Statements\n"
        "┃        ┃     ┃  └─ ForLoop\n"
        "┃        ┃     ┃     ├─ Assign\n"
        "┃        ┃     ┃     │  ├─ Var -- name:'@for0_im'\n"
        "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
        "┃        ┃     ┃     ├─ Var -- name:'m'\n"
        "┃        ┃     ┃     ├─ Int -- val:'1'\n"
        "┃        ┃     ┃     ┢─ Statements\n"
        "┃        ┃     ┃     ┃  └─ ArrayAssign\n"
        "┃        ┃     ┃     ┃     ├─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     │  ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃     ┃     ┃     │  ┣─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃  └─ ArrayExpr\n"
        "┃        ┃     ┃     ┃     │  ┃     ┢─ Exprs\n"
        "┃        ┃     ┃     ┃     │  ┃     ┃  └─ Var -- name:'@for0_im'\n"
        "┃        ┃     ┃     ┃     │  ┃     ┡─ NULL\n"
        "┃        ┃     ┃     ┃     │  ┃     └─ Var -- name:'rows'\n"
        "┃        ┃     ┃     ┃     │  ┡─ NULL\n"
        "┃        ┃     ┃     ┃     │  └─ Var -- name:'field'\n"
        "┃        ┃     ┃     ┃     └─ Bool -- val:'1'\n"
        "┃        ┃     ┃     ┗─ NULL\n"
        "┃        ┃     ┣─ Statements\n"
        "┃        ┃     ┃  └─ RetStatement\n"
        "┃        ┃     ┃     └─ Bool -- val:'1'\n"
        "┃        ┃     ┡─ NULL\n"
        "┃        ┃     └─ NULL\n"
        "┃        ┣─ Statements\n"
        "┃        ┃  └─ RetStatement\n"
        "┃        ┃     └─ Bool -- val:'0'\n"
        "┃        ┗─ NULL\n"
        "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected =
        "┌─ 0: Program\n"
        "├─ @fun_scanFloat: FunHeader -- type:'float' -- Params: (null)\n"
        "├─ @fun_scanFloatVec: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_printIntVec: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_printFloatMat: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_scanIntMat: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_printFloatVec: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_printInt: FunHeader -- type:'void' -- Params: int (Var -- name:'val')\n"
        "├─ @fun_scanInt: FunHeader -- type:'int' -- Params: (null)\n"
        "├─ @fun_scanIntVec: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_matMul: FunHeader -- type:'bool' -- Params: float (ArrayVar), float (ArrayVar), "
        "float (ArrayVar)\n"
        "├─ @fun_printNewlines: FunHeader -- type:'void' -- Params: int (Var -- name:'num')\n"
        "├─ @fun_scanFloatMat: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_queens: FunHeader -- type:'bool' -- Params: bool (ArrayVar)\n"
        "├─ @fun_printIntMat: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_printSpaces: FunHeader -- type:'void' -- Params: int (Var -- name:'num')\n"
        "├─ @fun_printFloat: FunHeader -- type:'void' -- Params: float (Var -- name:'val')\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_printIntVec' -- parent: '0: Program'\n"
        "├─ n: DimensionVars\n"
        "├─ vec: Params -- type:'int'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_printFloatVec' -- parent: '0: Program'\n"
        "├─ n: DimensionVars\n"
        "├─ vec: Params -- type:'float'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_printIntMat' -- parent: '0: Program'\n"
        "├─ @for1_j: VarDec -- type:'int'\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ mat: Params -- type:'int'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_printFloatMat' -- parent: '0: Program'\n"
        "├─ @for1_j: VarDec -- type:'int'\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ mat: Params -- type:'float'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_scanIntVec' -- parent: '0: Program'\n"
        "├─ n: DimensionVars\n"
        "├─ vec: Params -- type:'int'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_scanFloatVec' -- parent: '0: Program'\n"
        "├─ n: DimensionVars\n"
        "├─ vec: Params -- type:'float'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_scanIntMat' -- parent: '0: Program'\n"
        "├─ @for1_j: VarDec -- type:'int'\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ mat: Params -- type:'int'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_scanFloatMat' -- parent: '0: Program'\n"
        "├─ @for1_j: VarDec -- type:'int'\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ mat: Params -- type:'float'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_matMul' -- parent: '0: Program'\n"
        "├─ a: Params -- type:'float'\n"
        "├─ b: Params -- type:'float'\n"
        "├─ c: Params -- type:'float'\n"
        "├─ l: DimensionVars\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ o: DimensionVars\n"
        "├─ p: DimensionVars\n"
        "├─ q: DimensionVars\n"
        "├─ @for4_ik: VarDec -- type:'int'\n"
        "├─ @for0_im: VarDec -- type:'int'\n"
        "├─ @for1_ik: VarDec -- type:'int'\n"
        "├─ @for2_im: VarDec -- type:'int'\n"
        "├─ @for3_in: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_queens' -- parent: '0: Program'\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ @fun_contains: FunHeader -- type:'bool' -- Params: int (ArrayVar), int (Var -- "
        "name:'value')\n"
        "├─ rows: VarDec -- type:'int'\n"
        "├─ @for0_im: VarDec -- type:'int'\n"
        "├─ diagnolNegative: VarDec -- type:'int'\n"
        "├─ startIndex: VarDec -- type:'int'\n"
        "├─ field: Params -- type:'bool'\n"
        "├─ @fun_solveQueens: FunHeader -- type:'bool' -- Params: int (Var -- name:'im')\n"
        "├─ @fun_isValid: FunHeader -- type:'bool' -- Params: (null)\n"
        "├─ diagnolPositive: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 2: FunDef '@fun_contains' -- parent: '1: FunDef '@fun_queens''\n"
        "├─ m: DimensionVars\n"
        "├─ array: Params -- type:'int'\n"
        "├─ value: Params -- type:'int'\n"
        "├─ @for0_i: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 2: FunDef '@fun_isValid' -- parent: '1: FunDef '@fun_queens''\n"
        "├─ @for0_im: VarDec -- type:'int'\n"
        "├─ @for1_in: VarDec -- type:'int'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 2: FunDef '@fun_solveQueens' -- parent: '1: FunDef '@fun_queens''\n"
        "├─ im: Params -- type:'int'\n"
        "├─ @for0_in: VarDec -- type:'int'\n"
        "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Functional_Assignment01_Core)
{
    SetUp("functional/assignment_01/core.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_gcd'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'a'\n"
                           "┃     │  ┣─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'b'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'rest'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Binop -- op:'||'\n"
                           "┃        ┃     │  ├─ Binop -- op:'=='\n"
                           "┃        ┃     │  │  ├─ Var -- name:'b'\n"
                           "┃        ┃     │  │  └─ Int -- val:'0'\n"
                           "┃        ┃     │  └─ Binop -- op:'=='\n"
                           "┃        ┃     │     ├─ Var -- name:'a'\n"
                           "┃        ┃     │     └─ Int -- val:'0'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     └─ Int -- val:'0'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'rest'\n"
                           "┃        ┃     └─ Binop -- op:'%'\n"
                           "┃        ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃        └─ Var -- name:'b'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ WhileLoop\n"
                           "┃        ┃     ├─ Binop -- op:'!='\n"
                           "┃        ┃     │  ├─ Var -- name:'rest'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'a'\n"
                           "┃        ┃     ┃     └─ Var -- name:'b'\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'b'\n"
                           "┃        ┃     ┃     └─ Var -- name:'rest'\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'rest'\n"
                           "┃        ┃     ┃     └─ Binop -- op:'%'\n"
                           "┃        ┃     ┃        ├─ Var -- name:'a'\n"
                           "┃        ┃     ┃        └─ Var -- name:'b'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'b'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_fac'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'n'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'factorial'\n"
                           "┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Binop -- op:'=='\n"
                           "┃        ┃     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     └─ Int -- val:'1'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ├─ Binop -- op:'<'\n"
                           "┃        ┃     ┃     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     ┃     └─ Var -- name:'n'\n"
                           "┃        ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Var -- name:'n'\n"
                           "┃        ┃     ├─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Monop -- op:'-'\n"
                           "┃        ┃     │  └─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ├─ Var -- name:'factorial'\n"
                           "┃        ┃     ┃     └─ Binop -- op:'*'\n"
                           "┃        ┃     ┃        ├─ Var -- name:'factorial'\n"
                           "┃        ┃     ┃        └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Var -- name:'factorial'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_fib'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'n'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Binop -- op:'>='\n"
                           "┃        ┃     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     │  └─ Int -- val:'3'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃     ┃        ├─ ProcCall\n"
                           "┃        ┃     ┃        │  ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃        │  ┢─ Exprs\n"
                           "┃        ┃     ┃        │  ┃  └─ Binop -- op:'-'\n"
                           "┃        ┃     ┃        │  ┃     ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃        │  ┃     └─ Int -- val:'1'\n"
                           "┃        ┃     ┃        │  ┗─ NULL\n"
                           "┃        ┃     ┃        └─ ProcCall\n"
                           "┃        ┃     ┃           ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃           ┢─ Exprs\n"
                           "┃        ┃     ┃           ┃  └─ Binop -- op:'-'\n"
                           "┃        ┃     ┃           ┃     ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃           ┃     └─ Int -- val:'2'\n"
                           "┃        ┃     ┃           ┗─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ├─ Binop -- op:'<='\n"
                           "┃        ┃     ┃     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     ┃     └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'1'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'bool'\n"
                           "┃     │  ├─ Var -- name:'@fun_isprime'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'n'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Binop -- op:'<='\n"
                           "┃        ┃     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     │  └─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     └─ Bool -- val:'0'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ├─ Binop -- op:'||'\n"
                           "┃        ┃     ┃     │  ├─ Binop -- op:'||'\n"
                           "┃        ┃     ┃     │  │  ├─ Binop -- op:'||'\n"
                           "┃        ┃     ┃     │  │  │  ├─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     │  │  │  │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  │  │  │  └─ Int -- val:'2'\n"
                           "┃        ┃     ┃     │  │  │  └─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     │  │  │     ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  │  │     └─ Int -- val:'3'\n"
                           "┃        ┃     ┃     │  │  └─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     │  │     ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  │     └─ Int -- val:'5'\n"
                           "┃        ┃     ┃     │  └─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     │     ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │     └─ Int -- val:'7'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     ┃     └─ Bool -- val:'1'\n"
                           "┃        ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ┃     ├─ Binop -- op:'||'\n"
                           "┃        ┃     ┃     ┃     │  ├─ Binop -- op:'||'\n"
                           "┃        ┃     ┃     ┃     │  │  ├─ Binop -- op:'||'\n"
                           "┃        ┃     ┃     ┃     │  │  │  ├─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     ┃     │  │  │  │  ├─ Binop -- op:'%'\n"
                           "┃        ┃     ┃     ┃     │  │  │  │  │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     ┃     │  │  │  │  │  └─ Int -- val:'2'\n"
                           "┃        ┃     ┃     ┃     │  │  │  │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┃     │  │  │  └─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     ┃     │  │  │     ├─ Binop -- op:'%'\n"
                           "┃        ┃     ┃     ┃     │  │  │     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     ┃     │  │  │     │  └─ Int -- val:'3'\n"
                           "┃        ┃     ┃     ┃     │  │  │     └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┃     │  │  └─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     ┃     │  │     ├─ Binop -- op:'%'\n"
                           "┃        ┃     ┃     ┃     │  │     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     ┃     │  │     │  └─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ┃     │  │     └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┃     │  └─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     ┃     │     ├─ Binop -- op:'%'\n"
                           "┃        ┃     ┃     ┃     │     │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     ┃     │     │  └─ Int -- val:'7'\n"
                           "┃        ┃     ┃     ┃     │     └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     ┃     ┃     └─ Bool -- val:'0'\n"
                           "┃        ┃     ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_i'\n"
                           "┃        ┃     │  └─ Int -- val:'11'\n"
                           "┃        ┃     ├─ Var -- name:'n'\n"
                           "┃        ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ├─ Binop -- op:'=='\n"
                           "┃        ┃     ┃     │  ├─ Binop -- op:'%'\n"
                           "┃        ┃     ┃     │  │  ├─ Var -- name:'n'\n"
                           "┃        ┃     ┃     │  │  └─ Var -- name:'@for0_i'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ RetStatement\n"
                           "┃        ┃     ┃     ┃     └─ Bool -- val:'0'\n"
                           "┃        ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected = "┌─ 0: Program\n"
               "├─ @fun_isprime: FunHeader -- type:'bool' -- Params: int (Var -- name:'n')\n"
               "├─ @fun_fac: FunHeader -- type:'int' -- Params: int (Var -- name:'n')\n"
               "├─ @fun_gcd: FunHeader -- type:'int' -- Params: int (Var -- name:'a'), int (Var -- "
               "name:'b')\n"
               "├─ @fun_fib: FunHeader -- type:'int' -- Params: int (Var -- name:'n')\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_gcd' -- parent: '0: Program'\n"
               "├─ a: Params -- type:'int'\n"
               "├─ b: Params -- type:'int'\n"
               "├─ rest: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_fac' -- parent: '0: Program'\n"
               "├─ n: Params -- type:'int'\n"
               "├─ factorial: VarDec -- type:'int'\n"
               "├─ @for0_i: VarDec -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_fib' -- parent: '0: Program'\n"
               "├─ n: Params -- type:'int'\n"
               "└────────────────────\n"
               "\n"
               "┌─ 1: FunDef '@fun_isprime' -- parent: '0: Program'\n"
               "├─ n: Params -- type:'int'\n"
               "├─ @for0_i: VarDec -- type:'int'\n"
               "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

TEST_F(ContextTest, Functional_Assignment01_test)
{
    SetUp("functional/assignment_01/test.cvc");
    ASSERT_NE(nullptr, root);

    const char *expected = "Program\n"
                           "┢─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'val'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printFloat'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ Var -- name:'val'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'int'\n"
                           "┃        ├─ Var -- name:'@fun_scanInt'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'float'\n"
                           "┃        ├─ Var -- name:'@fun_scanFloat'\n"
                           "┃        └─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'num'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'num'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'int'\n"
                           "┃        ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'a'\n"
                           "┃        ┣─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'b'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'int'\n"
                           "┃        ├─ Var -- name:'@fun_fac'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'n'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'int'\n"
                           "┃        ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'n'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'bool'\n"
                           "┃        ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ Var -- name:'n'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printIntVec'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'vec'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printFloatVec'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'vec'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printIntMat'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'m'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'mat'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_printFloatMat'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'m'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'mat'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_scanIntVec'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'vec'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_scanFloatVec'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'vec'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_scanIntMat'\n"
                           "┃        ┢─ Params -- type:'int'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'m'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'mat'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'void'\n"
                           "┃        ├─ Var -- name:'@fun_scanFloatMat'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'m'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'mat'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'bool'\n"
                           "┃        ├─ Var -- name:'@fun_matMul'\n"
                           "┃        ┢─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'m'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'a'\n"
                           "┃        ┣─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'o'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'p'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'b'\n"
                           "┃        ┣─ Params -- type:'float'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'q'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'l'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'c'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDec\n"
                           "┃     └─ FunHeader -- type:'bool'\n"
                           "┃        ├─ Var -- name:'@fun_queens'\n"
                           "┃        ┢─ Params -- type:'bool'\n"
                           "┃        ┃  └─ ArrayVar\n"
                           "┃        ┃     ┢─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'m'\n"
                           "┃        ┃     ┣─ DimensionVars\n"
                           "┃        ┃     ┃  └─ Var -- name:'n'\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ Var -- name:'field'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'successCount'\n"
                           "┃        └─ Int -- val:'0'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'testCount'\n"
                           "┃        └─ Int -- val:'0'\n"
                           "┣─ Declarations\n"
                           "┃  └─ GlobalDef -- has_export:'0'\n"
                           "┃     └─ VarDec -- type:'int'\n"
                           "┃        ├─ Var -- name:'testGroupCount'\n"
                           "┃        └─ Int -- val:'0'\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'1'\n"
                           "┃     ├─ FunHeader -- type:'int'\n"
                           "┃     │  ├─ Var -- name:'@fun_main'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test_gcd'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test_fac'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test_fib'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test_isprime'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test_matMul'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'successCount'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'testCount'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ RetStatement\n"
                           "┃        ┃     └─ Int -- val:'0'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test'\n"
                           "┃     │  ┢─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'expected'\n"
                           "┃     │  ┣─ Params -- type:'int'\n"
                           "┃     │  ┃  └─ Var -- name:'value'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'success'\n"
                           "┃        ┃     └─ Binop -- op:'=='\n"
                           "┃        ┃        ├─ Var -- name:'expected'\n"
                           "┃        ┃        └─ Var -- name:'value'\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testCount'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'testCount'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'successCount'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'successCount'\n"
                           "┃        ┃        └─ Cast -- type:'int'\n"
                           "┃        ┃           └─ Var -- name:'success'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ IfStatement\n"
                           "┃        ┃     ├─ Monop -- op:'!'\n"
                           "┃        ┃     │  └─ Var -- name:'success'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'4'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Var -- name:'expected'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Var -- name:'value'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┣─ Statements\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┡─ NULL\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_testB'\n"
                           "┃     │  ┢─ Params -- type:'bool'\n"
                           "┃     │  ┃  └─ Var -- name:'expected'\n"
                           "┃     │  ┣─ Params -- type:'bool'\n"
                           "┃     │  ┃  └─ Var -- name:'value'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Cast -- type:'int'\n"
                           "┃        ┃     ┃     └─ Var -- name:'expected'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ Cast -- type:'int'\n"
                           "┃        ┃     ┃     └─ Var -- name:'value'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_testFMat'\n"
                           "┃     │  ┢─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'m'\n"
                           "┃     │  ┃     ┣─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'n'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'input1'\n"
                           "┃     │  ┣─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'o'\n"
                           "┃     │  ┃     ┣─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'p'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'input2'\n"
                           "┃     │  ┣─ Params -- type:'float'\n"
                           "┃     │  ┃  └─ ArrayVar\n"
                           "┃     │  ┃     ┢─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'q'\n"
                           "┃     │  ┃     ┣─ DimensionVars\n"
                           "┃     │  ┃     ┃  └─ Var -- name:'l'\n"
                           "┃     │  ┃     ┡─ NULL\n"
                           "┃     │  ┃     └─ Var -- name:'expected'\n"
                           "┃     │  ┗─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Var -- name:'q'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Var -- name:'l'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'output'\n"
                           "┃        ┃     └─ Monop -- op:'-'\n"
                           "┃        ┃        └─ Float -- val:'1.000000'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'bool'\n"
                           "┃        ┃     ├─ Var -- name:'success'\n"
                           "┃        ┃     └─ Bool -- val:'1'\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for0_im'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'int'\n"
                           "┃        ┃     ├─ Var -- name:'@for1_in'\n"
                           "┃        ┃     └─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_matMul'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'input1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'input2'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'output'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ForLoop\n"
                           "┃        ┃     ├─ Assign\n"
                           "┃        ┃     │  ├─ Var -- name:'@for0_im'\n"
                           "┃        ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ├─ Int -- val:'3'\n"
                           "┃        ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┢─ Statements\n"
                           "┃        ┃     ┃  └─ ForLoop\n"
                           "┃        ┃     ┃     ├─ Assign\n"
                           "┃        ┃     ┃     │  ├─ Var -- name:'@for1_in'\n"
                           "┃        ┃     ┃     │  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ├─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ├─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃  └─ IfStatement\n"
                           "┃        ┃     ┃     ┃     ├─ Binop -- op:'!='\n"
                           "┃        ┃     ┃     ┃     │  ├─ ArrayExpr\n"
                           "┃        ┃     ┃     ┃     │  │  ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     │  │  ┃  └─ Var -- name:'@for0_im'\n"
                           "┃        ┃     ┃     ┃     │  │  ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃     │  │  ┃  └─ Var -- name:'@for1_in'\n"
                           "┃        ┃     ┃     ┃     │  │  ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     │  │  └─ Var -- name:'output'\n"
                           "┃        ┃     ┃     ┃     │  └─ ArrayExpr\n"
                           "┃        ┃     ┃     ┃     │     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     │     ┃  └─ Var -- name:'@for0_im'\n"
                           "┃        ┃     ┃     ┃     │     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃     │     ┃  └─ Var -- name:'@for1_in'\n"
                           "┃        ┃     ┃     ┃     │     ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     │     └─ Var -- name:'expected'\n"
                           "┃        ┃     ┃     ┃     ┢─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ Assign\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'success'\n"
                           "┃        ┃     ┃     ┃     ┃     └─ Bool -- val:'0'\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_im'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printInt'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for1_in'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Int -- val:'3'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printFloat'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ ArrayExpr\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_im'\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for1_in'\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     └─ Var -- name:'expected'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printSpaces'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printFloat'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ ArrayExpr\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for0_im'\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┃  └─ Var -- name:'@for1_in'\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     ┃     ┃     └─ Var -- name:'output'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┣─ Statements\n"
                           "┃        ┃     ┃     ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ┃     ┃     ├─ Var -- name:'@fun_printNewlines'\n"
                           "┃        ┃     ┃     ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃     ┃     ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     ┃     ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┃     ┃     ┡─ NULL\n"
                           "┃        ┃     ┃     ┃     └─ NULL\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testCount'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'testCount'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'testGroupCount'\n"
                           "┃        ┃        └─ Int -- val:'1'\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ Assign\n"
                           "┃        ┃     ├─ Var -- name:'successCount'\n"
                           "┃        ┃     └─ Binop -- op:'+'\n"
                           "┃        ┃        ├─ Var -- name:'successCount'\n"
                           "┃        ┃        └─ Cast -- type:'int'\n"
                           "┃        ┃           └─ Var -- name:'success'\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test_gcd'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'6'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'12'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'18'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'6'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'18'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'12'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'38'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'38'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'38'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'12'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'34'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_gcd'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'43'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test_fac'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Monop -- op:'-'\n"
                           "┃        ┃     ┃     └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fac'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Monop -- op:'-'\n"
                           "┃        ┃     ┃     ┃     └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fac'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'120'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fac'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fac'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test_fib'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'55'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'10'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Monop -- op:'-'\n"
                           "┃        ┃     ┃     ┃     └─ Int -- val:'12'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_test'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_fib'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test_isprime'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ├─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Monop -- op:'-'\n"
                           "┃        ┃     ┃     ┃     └─ Int -- val:'12'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'0'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'1'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'13'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'25'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'97'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testB'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Bool -- val:'0'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ ProcCall\n"
                           "┃        ┃     ┃     ├─ Var -- name:'@fun_isprime'\n"
                           "┃        ┃     ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃     ┃  └─ Int -- val:'121'\n"
                           "┃        ┃     ┃     ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┣─ Declarations\n"
                           "┃  └─ FunDef -- has_export:'0'\n"
                           "┃     ├─ FunHeader -- type:'void'\n"
                           "┃     │  ├─ Var -- name:'@fun_test_matMul'\n"
                           "┃     │  └─ NULL\n"
                           "┃     └─ FunBody\n"
                           "┃        ┢─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'3'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input1'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'1.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'2.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'3.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'4.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'5.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'6.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'2'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'input2'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'1.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'2.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'3.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'4.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'5.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'6.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'7.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'8.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'9.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'10.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┣─ VarDecs\n"
                           "┃        ┃  └─ VarDec -- type:'float'\n"
                           "┃        ┃     ├─ ArrayExpr\n"
                           "┃        ┃     │  ┢─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'3'\n"
                           "┃        ┃     │  ┣─ Exprs\n"
                           "┃        ┃     │  ┃  └─ Int -- val:'5'\n"
                           "┃        ┃     │  ┡─ NULL\n"
                           "┃        ┃     │  └─ Var -- name:'expected'\n"
                           "┃        ┃     ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'13.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'16.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'19.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'22.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'25.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'27.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'34.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'41.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'48.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'55.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┢─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'41.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'52.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'63.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'74.000000'\n"
                           "┃        ┃     ┃  ┣─ ArrayInit\n"
                           "┃        ┃     ┃  ┃  └─ Float -- val:'85.000000'\n"
                           "┃        ┃     ┃  ┗─ NULL\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┡─ NULL\n"
                           "┃        ├─ NULL\n"
                           "┃        ┢─ Statements\n"
                           "┃        ┃  └─ ProcCall\n"
                           "┃        ┃     ├─ Var -- name:'@fun_testFMat'\n"
                           "┃        ┃     ┢─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'input1'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'input2'\n"
                           "┃        ┃     ┣─ Exprs\n"
                           "┃        ┃     ┃  └─ Var -- name:'expected'\n"
                           "┃        ┃     ┗─ NULL\n"
                           "┃        ┗─ NULL\n"
                           "┗─ NULL\n";

    ASSERT_MLSTREQ(expected, root_string);

    expected =
        "┌─ 0: Program\n"
        "├─ @fun_scanFloat: FunHeader -- type:'float' -- Params: (null)\n"
        "├─ @fun_test_matMul: FunHeader -- type:'void' -- Params: (null)\n"
        "├─ @fun_testFMat: FunHeader -- type:'void' -- Params: float (ArrayVar), float (ArrayVar), "
        "float (ArrayVar)\n"
        "├─ @fun_scanFloatVec: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_printIntVec: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_printFloatMat: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_test_gcd: FunHeader -- type:'void' -- Params: (null)\n"
        "├─ @fun_testB: FunHeader -- type:'void' -- Params: bool (Var -- name:'expected'), bool "
        "(Var -- name:'value')\n"
        "├─ @fun_test: FunHeader -- type:'void' -- Params: int (Var -- name:'expected'), int (Var "
        "-- name:'value')\n"
        "├─ @fun_scanIntMat: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_isprime: FunHeader -- type:'bool' -- Params: int (Var -- name:'n')\n"
        "├─ successCount: VarDec -- type:'int'\n"
        "├─ @fun_fac: FunHeader -- type:'int' -- Params: int (Var -- name:'n')\n"
        "├─ @fun_test_fib: FunHeader -- type:'void' -- Params: (null)\n"
        "├─ @fun_printFloatVec: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ @fun_printInt: FunHeader -- type:'void' -- Params: int (Var -- name:'val')\n"
        "├─ @fun_scanInt: FunHeader -- type:'int' -- Params: (null)\n"
        "├─ @fun_test_isprime: FunHeader -- type:'void' -- Params: (null)\n"
        "├─ @fun_gcd: FunHeader -- type:'int' -- Params: int (Var -- name:'a'), int (Var -- "
        "name:'b')\n"
        "├─ @fun_scanIntVec: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ @fun_matMul: FunHeader -- type:'bool' -- Params: float (ArrayVar), float (ArrayVar), "
        "float (ArrayVar)\n"
        "├─ @fun_printNewlines: FunHeader -- type:'void' -- Params: int (Var -- name:'num')\n"
        "├─ @fun_scanFloatMat: FunHeader -- type:'void' -- Params: float (ArrayVar)\n"
        "├─ testGroupCount: VarDec -- type:'int'\n"
        "├─ @fun_queens: FunHeader -- type:'bool' -- Params: bool (ArrayVar)\n"
        "├─ @fun_printIntMat: FunHeader -- type:'void' -- Params: int (ArrayVar)\n"
        "├─ testCount: VarDec -- type:'int'\n"
        "├─ @fun_main: FunHeader -- type:'int' -- Params: (null)\n"
        "├─ @fun_printSpaces: FunHeader -- type:'void' -- Params: int (Var -- name:'num')\n"
        "├─ @fun_printFloat: FunHeader -- type:'void' -- Params: float (Var -- name:'val')\n"
        "├─ @fun_test_fac: FunHeader -- type:'void' -- Params: (null)\n"
        "├─ @fun_fib: FunHeader -- type:'int' -- Params: int (Var -- name:'n')\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_main' -- parent: '0: Program'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_test' -- parent: '0: Program'\n"
        "├─ expected: Params -- type:'int'\n"
        "├─ value: Params -- type:'int'\n"
        "├─ success: VarDec -- type:'bool'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_testB' -- parent: '0: Program'\n"
        "├─ expected: Params -- type:'bool'\n"
        "├─ value: Params -- type:'bool'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_testFMat' -- parent: '0: Program'\n"
        "├─ l: DimensionVars\n"
        "├─ m: DimensionVars\n"
        "├─ n: DimensionVars\n"
        "├─ o: DimensionVars\n"
        "├─ p: DimensionVars\n"
        "├─ q: DimensionVars\n"
        "├─ @for0_im: VarDec -- type:'int'\n"
        "├─ expected: Params -- type:'float'\n"
        "├─ @for1_in: VarDec -- type:'int'\n"
        "├─ output: VarDec -- type:'float'\n"
        "├─ input1: Params -- type:'float'\n"
        "├─ input2: Params -- type:'float'\n"
        "├─ success: VarDec -- type:'bool'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_test_gcd' -- parent: '0: Program'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_test_fac' -- parent: '0: Program'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_test_fib' -- parent: '0: Program'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_test_isprime' -- parent: '0: Program'\n"
        "└────────────────────\n"
        "\n"
        "┌─ 1: FunDef '@fun_test_matMul' -- parent: '0: Program'\n"
        "├─ expected: VarDec -- type:'float'\n"
        "├─ input1: VarDec -- type:'float'\n"
        "├─ input2: VarDec -- type:'float'\n"
        "└────────────────────\n";

    ASSERT_MLSTREQ(expected, symbols_string);
}

// /////////////////////////
// COMPILATION FAILURE tests
// /////////////////////////

TEST_F(ContextTest, DoubleFundefValid)
{
    SetUpNoExecute("double/fundef_valid/main.cvc");
    ASSERT_EXIT(
        run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
        testing::AllOf(testing::HasSubstr("already defined"), testing::HasSubstr(" 1 Error")));
}

TEST_F(ContextTest, GlobalDecInt)
{
    SetUpNoExecute("globaldec_int/main.cvc");
    ASSERT_EXIT(
        run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
        testing::AllOf(testing::HasSubstr("already defined"), testing::HasSubstr(" 2 Error")));
}

TEST_F(ContextTest, NoVarDecsFor)
{
    SetUpNoExecute("for/main.cvc");
    ASSERT_EXIT(
        run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
        testing::AllOf(
            testing::HasSubstr("was not declared"),
            testing::HasSubstr("'cast expression' has type 'float' but expected type 'int'"),
            testing::HasSubstr("non-void function does not return a value in all control paths."),
            testing::HasSubstr(" 15 Error")));
}

TEST_F(ContextTest, DoubleDec)
{
    SetUpNoExecute("double/vardec/main.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                testing::AllOf(testing::HasSubstr("already defined"),
                               testing::HasSubstr("'value1'"), testing::HasSubstr("3:5 - 3:20")));
}

TEST_F(ContextTest, DoubleFunDef)
{
    SetUpNoExecute("double/fundef/main.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                testing::AllOf(testing::HasSubstr("'fun_one' already defined"),
                               testing::HasSubstr("1:1 - 1:23")));
}

TEST_F(ContextTest, VarDecInvalid)
{
    SetUpNoExecute("double/vardec_invalid/main.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                testing::AllOf(testing::HasSubstr("invalid character"),
                               testing::HasSubstr("line 7, col 9")));
}

TEST_F(ContextTest, Suite_Basic_Empty)
{
    SetUpNoExecute("testsuite_public/basic/check_error/empty.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                "Error parsing source code: syntax error");
}

TEST_F(ContextTest, Suite_Basic_ExportExternFun)
{
    SetUpNoExecute("testsuite_public/basic/check_error/export_extern_fun.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                "Error parsing source code: syntax error");
}

TEST_F(ContextTest, Suite_Basic_GlobalStatement)
{
    SetUpNoExecute("testsuite_public/basic/check_error/global_statement.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                "Error parsing source code: syntax error");
}

TEST_F(ContextTest, Suite_Basic_InvalidForLoop)
{
    SetUpNoExecute("testsuite_public/basic/check_error/invalid_for_loop_type.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                "Error parsing source code: syntax error");
}

TEST_F(ContextTest, Suite_Basic_InvalidReturnType)
{
    SetUpNoExecute("testsuite_public/basic/check_error/invalid_return_type.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                testing::AllOf(testing::HasSubstr("'true' has type 'bool' but expected type 'int'"),
                               testing::HasSubstr(" 1 Error")));
}

TEST_F(ContextTest, Suite_Basic_InvalidReturnVoidFunc)
{
    SetUpNoExecute("testsuite_public/basic/check_error/invalid_return_voidfunc.cvc");
    ASSERT_EXIT(
        run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
        testing::AllOf(testing::HasSubstr("'true' has type 'bool' but expected type 'void'"),
                       testing::HasSubstr(" 1 Error")));
}

TEST_F(ContextTest, Suite_Basic_InvalidStatement)
{
    SetUpNoExecute("testsuite_public/basic/check_error/invalid_statements.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                "Error parsing source code: syntax error");
}

TEST_F(ContextTest, Suite_Basic_UndefinedVar)
{
    SetUpNoExecute("testsuite_public/basic/check_error/undefined_var.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                testing::AllOf(testing::HasSubstr("'notdef' was not declared."),
                               testing::HasSubstr(" 1 Error")));
}

TEST_F(ContextTest, Suite_Basic_UnterminatedComment)
{
    SetUpNoExecute("testsuite_public/basic/check_error/unterminated_comment.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                "Error parsing source code: syntax error");
}

TEST_F(ContextTest, Suite_Arrays_InvalidInit)
{
    SetUpNoExecute("testsuite_public/arrays/check_error/invalid_init.cvc");
    ASSERT_EXIT(
        run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
        testing::AllOf(
            testing::HasSubstr("Too many dimensions in array initalization."),
            testing::HasSubstr("Array initalization does not match the dimension of the array."),
            testing::HasSubstr(" 4 Error")));
}

TEST_F(ContextTest, Suite_Arrays_ShadowedDimension)
{
    SetUpNoExecute("testsuite_public/arrays/check_error/shadowed_dimension.cvc");
    ASSERT_EXIT(run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
                testing::AllOf(testing::HasSubstr("'a' already defined at 1:11 - 1:19"),
                               testing::HasSubstr(" 1 Error")));
}

TEST_F(ContextTest, Typecheck_Invalid)
{
    SetUpNoExecute("typecheck/invalid/main.cvc");
    ASSERT_EXIT(
        run_context_analysis(input_filepath.c_str()), testing::ExitedWithCode(1),
        testing::AllOf(
            testing::HasSubstr("The binop operation '-' is not defined on the type 'bool'"),
            testing::HasSubstr("The binop operation '/' is not defined on the type 'bool'"),
            testing::HasSubstr("'<' has type 'bool' but expected type 'int'"),
            testing::HasSubstr("The binop operation '<' is not defined on the type 'bool'"),
            testing::HasSubstr("'>' has type 'bool' but expected type 'int'"),
            testing::HasSubstr("The binop operation '>' is not defined on the type 'bool'"),
            testing::HasSubstr("'3' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'<=' has type 'bool' but expected type 'float'"),
            testing::HasSubstr("'false' has type 'bool' but expected type 'int'"),
            testing::HasSubstr("'>=' has type 'bool' but expected type 'float'"),
            testing::HasSubstr("The binop operation '>=' is not defined on the type 'bool'"),
            testing::HasSubstr("'3' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'==' has type 'bool' but expected type 'int'"),
            testing::HasSubstr("'3.000000' has type 'float' but expected type 'int'"),
            testing::HasSubstr("!=' has type 'bool' but expected type 'float'"),
            testing::HasSubstr("'3' has type 'int' but expected type 'float'"),
            testing::HasSubstr("'3' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'5.000000' has type 'float' but expected type 'bool'"),
            testing::HasSubstr("'a' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'3.000000' has type 'float' but expected type 'bool'"),
            testing::HasSubstr("The monop operation '-' is not defined on the type 'bool'"),
            testing::HasSubstr("The monop operation '-' is not defined on the type 'bool'"),
            testing::HasSubstr("'1.000000' has type 'float' but expected type 'int'"),
            testing::HasSubstr("non-void function does not return a value in all control paths"),
            testing::HasSubstr("'6.000000' has type 'float' but expected type 'int'"),
            testing::HasSubstr("'false' has type 'bool' but expected type 'int'"),
            testing::HasSubstr("'1' has type 'int' but expected type 'void'"),
            testing::HasSubstr("'1.000000' has type 'float' but expected type 'void'"),
            testing::HasSubstr("'false' has type 'bool' but expected type 'void'"),
            testing::HasSubstr("Too many dimensions in array initalization"),
            testing::HasSubstr("Array initalization does not match the dimension of the array"),
            testing::HasSubstr(
                "Insufficient dimensions in array initalization, missing '2' further dimensions"),
            testing::HasSubstr("'1' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'2' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'3' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'4' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'5' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'6' has type 'int' but expected type 'bool'"),
            testing::HasSubstr("'1.000000' has type 'float' but expected type 'bool'"),
            testing::HasSubstr("'1' has type 'int' but expected type 'float'"),
            testing::HasSubstr("Array 'param' has '2' dimension, but '3' dimensions are used"),
            testing::HasSubstr("'false' has type 'bool' but expected type 'int'"),
            testing::HasSubstr("'1.000000' has type 'float' but expected type 'int'"),
            testing::HasSubstr("Array 'param' has '2' dimension, but '1' dimensions are used"),
            testing::HasSubstr("Array 'param' can not be assigned a scalar value without providing "
                               "dimension indices"),
            testing::HasSubstr(" 46 Error")));
}
